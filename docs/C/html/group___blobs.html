<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LiteCore: Blobs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LiteCore
   </div>
   <div id="projectbrief">Couchbase Lite cross-platform core implementation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="doc-content">
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a>  </div>
  <div class="headertitle"><div class="title">Blobs</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_c4_blob_key.html">C4BlobKey</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A unique identifier of a blob based on a SHA-1 digest of its contents.  <a href="struct_c4_blob_key.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Blob Keys</h2></td></tr>
<tr class="memitem:ga1957714b29adffc606893f266a5de2c0" id="r_ga1957714b29adffc606893f266a5de2c0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga1957714b29adffc606893f266a5de2c0">c4blob_keyFromString</a> (<a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> str, <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a> *)</td></tr>
<tr class="memdesc:ga1957714b29adffc606893f266a5de2c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decodes a string of the form "sha1-"+base64 into a raw key.  <br /></td></tr>
<tr class="separator:ga1957714b29adffc606893f266a5de2c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2fb65de2b241bb9ca101700231249a8d" id="r_ga2fb65de2b241bb9ca101700231249a8d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga9621f4998e1f10a82cca421fede5588a">C4StringResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga2fb65de2b241bb9ca101700231249a8d">c4blob_keyToString</a> (<a class="el" href="struct_c4_blob_key.html">C4BlobKey</a>)</td></tr>
<tr class="memdesc:ga2fb65de2b241bb9ca101700231249a8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encodes a blob key to a string of the form "sha1-"+base64.  <br /></td></tr>
<tr class="separator:ga2fb65de2b241bb9ca101700231249a8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Blob Store API</h2></td></tr>
<tr class="memitem:ga3986fcf5f99eb5c4309753352814a590" id="r_ga3986fcf5f99eb5c4309753352814a590"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga3f2ced0e74afda9261b9337787129f57">C4BlobStore</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga3986fcf5f99eb5c4309753352814a590">c4db_getBlobStore</a> (<a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *db, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:ga3986fcf5f99eb5c4309753352814a590"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the BlobStore associated with a bundled database.  <br /></td></tr>
<tr class="separator:ga3986fcf5f99eb5c4309753352814a590"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacbdc00629cdcd99778ee84c28365c35e" id="r_gacbdc00629cdcd99778ee84c28365c35e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga3f2ced0e74afda9261b9337787129f57">C4BlobStore</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gacbdc00629cdcd99778ee84c28365c35e">c4blob_openStore</a> (<a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> dirPath, <a class="el" href="group___database.html#ga3dbc483ea55d3e717ebb4f8cbcc7ec9f">C4DatabaseFlags</a> flags, const <a class="el" href="struct_c4_encryption_key.html">C4EncryptionKey</a> *encryptionKey, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:gacbdc00629cdcd99778ee84c28365c35e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens a BlobStore in a directory.  <br /></td></tr>
<tr class="separator:gacbdc00629cdcd99778ee84c28365c35e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1ff8a10d111a29eb3584b29e6602e25f" id="r_ga1ff8a10d111a29eb3584b29e6602e25f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga1ff8a10d111a29eb3584b29e6602e25f">c4blob_freeStore</a> (<a class="el" href="group___base.html#ga3f2ced0e74afda9261b9337787129f57">C4BlobStore</a> *)</td></tr>
<tr class="memdesc:ga1ff8a10d111a29eb3584b29e6602e25f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes/frees a BlobStore.  <br /></td></tr>
<tr class="separator:ga1ff8a10d111a29eb3584b29e6602e25f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa31ebdf8a7ba4e95f3a785ff43c3a957" id="r_gaa31ebdf8a7ba4e95f3a785ff43c3a957"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaa31ebdf8a7ba4e95f3a785ff43c3a957">c4blob_deleteStore</a> (<a class="el" href="group___base.html#ga3f2ced0e74afda9261b9337787129f57">C4BlobStore</a> *, <a class="el" href="struct_c4_error.html">C4Error</a> *)</td></tr>
<tr class="memdesc:gaa31ebdf8a7ba4e95f3a785ff43c3a957"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes the BlobStore's blobs and directory, and (if successful) frees the object.  <br /></td></tr>
<tr class="separator:gaa31ebdf8a7ba4e95f3a785ff43c3a957"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Blob API</h2></td></tr>
<tr class="memitem:ga4a25945f76b55c27ade51144463e8b02" id="r_ga4a25945f76b55c27ade51144463e8b02"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga4a25945f76b55c27ade51144463e8b02">c4blob_getSize</a> (<a class="el" href="group___base.html#ga3f2ced0e74afda9261b9337787129f57">C4BlobStore</a> *, <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a>)</td></tr>
<tr class="memdesc:ga4a25945f76b55c27ade51144463e8b02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the content size of a blob given its key.  <br /></td></tr>
<tr class="separator:ga4a25945f76b55c27ade51144463e8b02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga38cfc188cfb9eb5adfe4f70c079c7260" id="r_ga38cfc188cfb9eb5adfe4f70c079c7260"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga7641ec7c9f4339b65cc4aabc050d67d8">C4SliceResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga38cfc188cfb9eb5adfe4f70c079c7260">c4blob_getContents</a> (<a class="el" href="group___base.html#ga3f2ced0e74afda9261b9337787129f57">C4BlobStore</a> *, <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a>, <a class="el" href="struct_c4_error.html">C4Error</a> *)</td></tr>
<tr class="memdesc:ga38cfc188cfb9eb5adfe4f70c079c7260"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the entire contents of a blob into memory.  <br /></td></tr>
<tr class="separator:ga38cfc188cfb9eb5adfe4f70c079c7260"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac87a865d90448e26e434a89db1e962a8" id="r_gac87a865d90448e26e434a89db1e962a8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga9621f4998e1f10a82cca421fede5588a">C4StringResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac87a865d90448e26e434a89db1e962a8">c4blob_getFilePath</a> (<a class="el" href="group___base.html#ga3f2ced0e74afda9261b9337787129f57">C4BlobStore</a> *, <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a>, <a class="el" href="struct_c4_error.html">C4Error</a> *)</td></tr>
<tr class="memdesc:gac87a865d90448e26e434a89db1e962a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the path of the file that stores the blob, if possible.  <br /></td></tr>
<tr class="separator:gac87a865d90448e26e434a89db1e962a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga85dfee477092b8f48e5d79807b86d906" id="r_ga85dfee477092b8f48e5d79807b86d906"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga85dfee477092b8f48e5d79807b86d906">c4blob_computeKey</a> (<a class="el" href="group___base.html#gac99d7d179bccd9bbaf29b28272975b47">C4Slice</a> contents)</td></tr>
<tr class="memdesc:ga85dfee477092b8f48e5d79807b86d906"><td class="mdescLeft">&#160;</td><td class="mdescRight">Derives the key of the given data, without storing it.  <br /></td></tr>
<tr class="separator:ga85dfee477092b8f48e5d79807b86d906"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga611f38db590098036f68b8b69726cb00" id="r_ga611f38db590098036f68b8b69726cb00"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga611f38db590098036f68b8b69726cb00">c4blob_create</a> (<a class="el" href="group___base.html#ga3f2ced0e74afda9261b9337787129f57">C4BlobStore</a> *store, <a class="el" href="group___base.html#gac99d7d179bccd9bbaf29b28272975b47">C4Slice</a> contents, const <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a> *expectedKey, <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a> *outKey, <a class="el" href="struct_c4_error.html">C4Error</a> *error)</td></tr>
<tr class="memdesc:ga611f38db590098036f68b8b69726cb00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores a blob.  <br /></td></tr>
<tr class="separator:ga611f38db590098036f68b8b69726cb00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga345b02fb75f623334b3c49448b8703c2" id="r_ga345b02fb75f623334b3c49448b8703c2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga345b02fb75f623334b3c49448b8703c2">c4blob_delete</a> (<a class="el" href="group___base.html#ga3f2ced0e74afda9261b9337787129f57">C4BlobStore</a> *, <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a>, <a class="el" href="struct_c4_error.html">C4Error</a> *)</td></tr>
<tr class="memdesc:ga345b02fb75f623334b3c49448b8703c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes a blob from the store given its key.  <br /></td></tr>
<tr class="separator:ga345b02fb75f623334b3c49448b8703c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Streamed Reads</h2></td></tr>
<tr class="memitem:ga0e578efe3336ecb63e777fd3b6f49c1b" id="r_ga0e578efe3336ecb63e777fd3b6f49c1b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga02b4b239f9add8f17da2971e1fd6eea6">C4ReadStream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga0e578efe3336ecb63e777fd3b6f49c1b">c4blob_openReadStream</a> (<a class="el" href="group___base.html#ga3f2ced0e74afda9261b9337787129f57">C4BlobStore</a> *, <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a>, <a class="el" href="struct_c4_error.html">C4Error</a> *)</td></tr>
<tr class="memdesc:ga0e578efe3336ecb63e777fd3b6f49c1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens a blob for reading, as a random-access byte stream.  <br /></td></tr>
<tr class="separator:ga0e578efe3336ecb63e777fd3b6f49c1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1b8ff205c41f0cb696f0da1dfdb6f6c7" id="r_ga1b8ff205c41f0cb696f0da1dfdb6f6c7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga1b8ff205c41f0cb696f0da1dfdb6f6c7">c4stream_read</a> (<a class="el" href="group___base.html#ga02b4b239f9add8f17da2971e1fd6eea6">C4ReadStream</a> *stream, void *buffer, size_t maxBytesToRead, <a class="el" href="struct_c4_error.html">C4Error</a> *error)</td></tr>
<tr class="memdesc:ga1b8ff205c41f0cb696f0da1dfdb6f6c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads from an open stream.  <br /></td></tr>
<tr class="separator:ga1b8ff205c41f0cb696f0da1dfdb6f6c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga09233c2a2566b02dc125c642cc96dad9" id="r_ga09233c2a2566b02dc125c642cc96dad9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga09233c2a2566b02dc125c642cc96dad9">c4stream_getLength</a> (<a class="el" href="group___base.html#ga02b4b239f9add8f17da2971e1fd6eea6">C4ReadStream</a> *, <a class="el" href="struct_c4_error.html">C4Error</a> *)</td></tr>
<tr class="memdesc:ga09233c2a2566b02dc125c642cc96dad9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the exact length in bytes of the stream.  <br /></td></tr>
<tr class="separator:ga09233c2a2566b02dc125c642cc96dad9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaefd6d41e571414eef9a8cd814fbd281b" id="r_gaefd6d41e571414eef9a8cd814fbd281b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaefd6d41e571414eef9a8cd814fbd281b">c4stream_seek</a> (<a class="el" href="group___base.html#ga02b4b239f9add8f17da2971e1fd6eea6">C4ReadStream</a> *, uint64_t position, <a class="el" href="struct_c4_error.html">C4Error</a> *)</td></tr>
<tr class="memdesc:gaefd6d41e571414eef9a8cd814fbd281b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Moves to a random location in the stream; the next c4stream_read call will read from that location.  <br /></td></tr>
<tr class="separator:gaefd6d41e571414eef9a8cd814fbd281b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Streamed Writes</h2></td></tr>
<tr class="memitem:ga579b0346fe9186b4af2302f36a294383" id="r_ga579b0346fe9186b4af2302f36a294383"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga4a238757c9baa9a4fcea8f03d42dfa15">C4WriteStream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga579b0346fe9186b4af2302f36a294383">c4blob_openWriteStream</a> (<a class="el" href="group___base.html#ga3f2ced0e74afda9261b9337787129f57">C4BlobStore</a> *, <a class="el" href="struct_c4_error.html">C4Error</a> *)</td></tr>
<tr class="memdesc:ga579b0346fe9186b4af2302f36a294383"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens a write stream for creating a new blob.  <br /></td></tr>
<tr class="separator:ga579b0346fe9186b4af2302f36a294383"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafcb6b0d42c1ed2fd933d1c5fc8c4dbce" id="r_gafcb6b0d42c1ed2fd933d1c5fc8c4dbce"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gafcb6b0d42c1ed2fd933d1c5fc8c4dbce">c4stream_write</a> (<a class="el" href="group___base.html#ga4a238757c9baa9a4fcea8f03d42dfa15">C4WriteStream</a> *, const void *bytes, size_t length, <a class="el" href="struct_c4_error.html">C4Error</a> *)</td></tr>
<tr class="memdesc:gafcb6b0d42c1ed2fd933d1c5fc8c4dbce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes data to a stream.  <br /></td></tr>
<tr class="separator:gafcb6b0d42c1ed2fd933d1c5fc8c4dbce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga812730f8a2606f4c0a33541f987d4db1" id="r_ga812730f8a2606f4c0a33541f987d4db1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga812730f8a2606f4c0a33541f987d4db1">c4stream_bytesWritten</a> (<a class="el" href="group___base.html#ga4a238757c9baa9a4fcea8f03d42dfa15">C4WriteStream</a> *)</td></tr>
<tr class="memdesc:ga812730f8a2606f4c0a33541f987d4db1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of bytes written to the stream.  <br /></td></tr>
<tr class="separator:ga812730f8a2606f4c0a33541f987d4db1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8cb752abaa1a71954513eb2d7444acc3" id="r_ga8cb752abaa1a71954513eb2d7444acc3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga8cb752abaa1a71954513eb2d7444acc3">c4stream_computeBlobKey</a> (<a class="el" href="group___base.html#ga4a238757c9baa9a4fcea8f03d42dfa15">C4WriteStream</a> *)</td></tr>
<tr class="memdesc:ga8cb752abaa1a71954513eb2d7444acc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the blob-key (digest) of the data written to the stream.  <br /></td></tr>
<tr class="separator:ga8cb752abaa1a71954513eb2d7444acc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8311c9bc7cbd32a21d2626c808ec3e3e" id="r_ga8311c9bc7cbd32a21d2626c808ec3e3e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga8311c9bc7cbd32a21d2626c808ec3e3e">c4stream_install</a> (<a class="el" href="group___base.html#ga4a238757c9baa9a4fcea8f03d42dfa15">C4WriteStream</a> *, const <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a> *expectedKey, <a class="el" href="struct_c4_error.html">C4Error</a> *)</td></tr>
<tr class="memdesc:ga8311c9bc7cbd32a21d2626c808ec3e3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds the data written to the stream as a finished blob to the store.  <br /></td></tr>
<tr class="separator:ga8311c9bc7cbd32a21d2626c808ec3e3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga85dfee477092b8f48e5d79807b86d906" name="ga85dfee477092b8f48e5d79807b86d906"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga85dfee477092b8f48e5d79807b86d906">&#9670;&#160;</a></span>c4blob_computeKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a> c4blob_computeKey </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gac99d7d179bccd9bbaf29b28272975b47">C4Slice</a></td>          <td class="paramname"><span class="paramname"><em>contents</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Derives the key of the given data, without storing it. </p>

</div>
</div>
<a id="ga611f38db590098036f68b8b69726cb00" name="ga611f38db590098036f68b8b69726cb00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga611f38db590098036f68b8b69726cb00">&#9670;&#160;</a></span>c4blob_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4blob_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga3f2ced0e74afda9261b9337787129f57">C4BlobStore</a> *</td>          <td class="paramname"><span class="paramname"><em>store</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#gac99d7d179bccd9bbaf29b28272975b47">C4Slice</a></td>          <td class="paramname"><span class="paramname"><em>contents</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a> *</td>          <td class="paramname"><span class="paramname"><em>expectedKey</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_blob_key.html">C4BlobKey</a> *</td>          <td class="paramname"><span class="paramname"><em>outKey</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em>error</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores a blob. </p>
<p>The associated key will be written to <code>outKey</code>, if non-NULL. If <code>expectedKey</code> is not NULL, then the operation will fail unless the contents actually have that key. </p>

</div>
</div>
<a id="ga345b02fb75f623334b3c49448b8703c2" name="ga345b02fb75f623334b3c49448b8703c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga345b02fb75f623334b3c49448b8703c2">&#9670;&#160;</a></span>c4blob_delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4blob_delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga3f2ced0e74afda9261b9337787129f57">C4BlobStore</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_blob_key.html">C4BlobKey</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes a blob from the store given its key. </p>

</div>
</div>
<a id="gaa31ebdf8a7ba4e95f3a785ff43c3a957" name="gaa31ebdf8a7ba4e95f3a785ff43c3a957"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa31ebdf8a7ba4e95f3a785ff43c3a957">&#9670;&#160;</a></span>c4blob_deleteStore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4blob_deleteStore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga3f2ced0e74afda9261b9337787129f57">C4BlobStore</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes the BlobStore's blobs and directory, and (if successful) frees the object. </p>
<dl class="section note"><dt>Note</dt><dd>This function is thread-safe. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This should only be used for unit testing. Never delete a BlobStore belonging to a C4Database. </dd></dl>

</div>
</div>
<a id="ga1ff8a10d111a29eb3584b29e6602e25f" name="ga1ff8a10d111a29eb3584b29e6602e25f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1ff8a10d111a29eb3584b29e6602e25f">&#9670;&#160;</a></span>c4blob_freeStore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> void c4blob_freeStore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga3f2ced0e74afda9261b9337787129f57">C4BlobStore</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes/frees a BlobStore. </p>
<p>(A NULL parameter is allowed.) </p><dl class="section note"><dt>Note</dt><dd>This function is thread-safe. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This should only be used for unit testing. Never free a BlobStore belonging to a C4Database. </dd></dl>

</div>
</div>
<a id="ga38cfc188cfb9eb5adfe4f70c079c7260" name="ga38cfc188cfb9eb5adfe4f70c079c7260"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga38cfc188cfb9eb5adfe4f70c079c7260">&#9670;&#160;</a></span>c4blob_getContents()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga7641ec7c9f4339b65cc4aabc050d67d8">C4SliceResult</a> c4blob_getContents </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga3f2ced0e74afda9261b9337787129f57">C4BlobStore</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_blob_key.html">C4BlobKey</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the entire contents of a blob into memory. </p>
<p>Caller is responsible for freeing it. </p>

</div>
</div>
<a id="gac87a865d90448e26e434a89db1e962a8" name="gac87a865d90448e26e434a89db1e962a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac87a865d90448e26e434a89db1e962a8">&#9670;&#160;</a></span>c4blob_getFilePath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga9621f4998e1f10a82cca421fede5588a">C4StringResult</a> c4blob_getFilePath </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga3f2ced0e74afda9261b9337787129f57">C4BlobStore</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_blob_key.html">C4BlobKey</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the path of the file that stores the blob, if possible. </p>
<p>This call may fail with error kC4ErrorWrongFormat if the blob is encrypted (in which case the file would be unreadable by the caller) or with kC4ErrorUnsupported if for some implementation reason the blob isn't stored as a standalone file. Thus, the caller MUST use this function only as an optimization, and fall back to reading the contents via the API if it fails. Also, it goes without saying that the caller MUST not modify the file! </p>

</div>
</div>
<a id="ga4a25945f76b55c27ade51144463e8b02" name="ga4a25945f76b55c27ade51144463e8b02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4a25945f76b55c27ade51144463e8b02">&#9670;&#160;</a></span>c4blob_getSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> int64_t c4blob_getSize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga3f2ced0e74afda9261b9337787129f57">C4BlobStore</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_blob_key.html">C4BlobKey</a></td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the content size of a blob given its key. </p>
<p>Returns -1 if it doesn't exist. WARNING: If the blob is encrypted, the return value is a conservative estimate that may be up to 16 bytes larger than the actual size. </p>

</div>
</div>
<a id="ga1957714b29adffc606893f266a5de2c0" name="ga1957714b29adffc606893f266a5de2c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1957714b29adffc606893f266a5de2c0">&#9670;&#160;</a></span>c4blob_keyFromString()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4blob_keyFromString </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a></td>          <td class="paramname"><span class="paramname"><em>str</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_blob_key.html">C4BlobKey</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decodes a string of the form "sha1-"+base64 into a raw key. </p>
<dl class="section note"><dt>Note</dt><dd>This function is thread-safe. </dd></dl>

</div>
</div>
<a id="ga2fb65de2b241bb9ca101700231249a8d" name="ga2fb65de2b241bb9ca101700231249a8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2fb65de2b241bb9ca101700231249a8d">&#9670;&#160;</a></span>c4blob_keyToString()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga9621f4998e1f10a82cca421fede5588a">C4StringResult</a> c4blob_keyToString </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_blob_key.html">C4BlobKey</a></td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Encodes a blob key to a string of the form "sha1-"+base64. </p>
<dl class="section note"><dt>Note</dt><dd>This function is thread-safe. </dd></dl>

</div>
</div>
<a id="ga0e578efe3336ecb63e777fd3b6f49c1b" name="ga0e578efe3336ecb63e777fd3b6f49c1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0e578efe3336ecb63e777fd3b6f49c1b">&#9670;&#160;</a></span>c4blob_openReadStream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga02b4b239f9add8f17da2971e1fd6eea6">C4ReadStream</a> * c4blob_openReadStream </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga3f2ced0e74afda9261b9337787129f57">C4BlobStore</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_blob_key.html">C4BlobKey</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens a blob for reading, as a random-access byte stream. </p>
<dl class="section note"><dt>Note</dt><dd>This function is thread-safe. </dd></dl>

</div>
</div>
<a id="gacbdc00629cdcd99778ee84c28365c35e" name="gacbdc00629cdcd99778ee84c28365c35e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacbdc00629cdcd99778ee84c28365c35e">&#9670;&#160;</a></span>c4blob_openStore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga3f2ced0e74afda9261b9337787129f57">C4BlobStore</a> * c4blob_openStore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a></td>          <td class="paramname"><span class="paramname"><em>dirPath</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___database.html#ga3dbc483ea55d3e717ebb4f8cbcc7ec9f">C4DatabaseFlags</a></td>          <td class="paramname"><span class="paramname"><em>flags</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_c4_encryption_key.html">C4EncryptionKey</a> *</td>          <td class="paramname"><span class="paramname"><em>encryptionKey</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em>outError</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens a BlobStore in a directory. </p>
<p>If the flags allow creating, the directory will be created if necessary. Call <a class="el" href="#ga1ff8a10d111a29eb3584b29e6602e25f" title="Closes/frees a BlobStore.">c4blob_freeStore()</a> when finished using the BlobStore. </p><dl class="section note"><dt>Note</dt><dd>This function is thread-safe. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This should only be used for unit testing. Naked BlobStores are not supported. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dirPath</td><td>The filesystem path of the directory holding the attachments. </td></tr>
    <tr><td class="paramname">flags</td><td>Specifies options like create, read-only </td></tr>
    <tr><td class="paramname">encryptionKey</td><td>Optional encryption algorithm &amp; key </td></tr>
    <tr><td class="paramname">outError</td><td>Error is returned here </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The BlobStore reference, or NULL on error </dd></dl>

</div>
</div>
<a id="ga579b0346fe9186b4af2302f36a294383" name="ga579b0346fe9186b4af2302f36a294383"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga579b0346fe9186b4af2302f36a294383">&#9670;&#160;</a></span>c4blob_openWriteStream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga4a238757c9baa9a4fcea8f03d42dfa15">C4WriteStream</a> * c4blob_openWriteStream </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga3f2ced0e74afda9261b9337787129f57">C4BlobStore</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens a write stream for creating a new blob. </p>
<p>You should then call c4stream_write to write the data, ending with c4stream_install to compute the blob's key and add it to the store, and then c4stream_closeWriter. </p><dl class="section note"><dt>Note</dt><dd>This function is thread-safe. </dd></dl>

</div>
</div>
<a id="ga3986fcf5f99eb5c4309753352814a590" name="ga3986fcf5f99eb5c4309753352814a590"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3986fcf5f99eb5c4309753352814a590">&#9670;&#160;</a></span>c4db_getBlobStore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga3f2ced0e74afda9261b9337787129f57">C4BlobStore</a> * c4db_getBlobStore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *</td>          <td class="paramname"><span class="paramname"><em>db</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em>outError</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the BlobStore associated with a bundled database. </p>
<dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Database when this function is called.</dd></dl>
<p>Fails if the database is not bundled. DO NOT call c4blob_freeStore on this! The C4Database will free it when it closes. </p>

</div>
</div>
<a id="ga812730f8a2606f4c0a33541f987d4db1" name="ga812730f8a2606f4c0a33541f987d4db1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga812730f8a2606f4c0a33541f987d4db1">&#9670;&#160;</a></span>c4stream_bytesWritten()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> uint64_t c4stream_bytesWritten </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga4a238757c9baa9a4fcea8f03d42dfa15">C4WriteStream</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the number of bytes written to the stream. </p>
<dl class="section note"><dt>Note</dt><dd>The caller must use a lock for WriteStream when this function is called. </dd></dl>

</div>
</div>
<a id="ga8cb752abaa1a71954513eb2d7444acc3" name="ga8cb752abaa1a71954513eb2d7444acc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8cb752abaa1a71954513eb2d7444acc3">&#9670;&#160;</a></span>c4stream_computeBlobKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a> c4stream_computeBlobKey </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga4a238757c9baa9a4fcea8f03d42dfa15">C4WriteStream</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes the blob-key (digest) of the data written to the stream. </p>
<p>This should only be called after writing the entire data. No more data can be written after this call. </p><dl class="section note"><dt>Note</dt><dd>The caller must use a lock for WriteStream when this function is called. </dd></dl>

</div>
</div>
<a id="ga09233c2a2566b02dc125c642cc96dad9" name="ga09233c2a2566b02dc125c642cc96dad9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga09233c2a2566b02dc125c642cc96dad9">&#9670;&#160;</a></span>c4stream_getLength()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> int64_t c4stream_getLength </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga02b4b239f9add8f17da2971e1fd6eea6">C4ReadStream</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the exact length in bytes of the stream. </p>
<dl class="section note"><dt>Note</dt><dd>This function is thread-safe. </dd></dl>

</div>
</div>
<a id="ga8311c9bc7cbd32a21d2626c808ec3e3e" name="ga8311c9bc7cbd32a21d2626c808ec3e3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8311c9bc7cbd32a21d2626c808ec3e3e">&#9670;&#160;</a></span>c4stream_install()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4stream_install </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga4a238757c9baa9a4fcea8f03d42dfa15">C4WriteStream</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a> *</td>          <td class="paramname"><span class="paramname"><em>expectedKey</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds the data written to the stream as a finished blob to the store. </p>
<p>If <code>expectedKey</code> is not NULL, then the operation will fail unless the contents actually have that key. (If you don't know ahead of time what the key should be, call c4stream_computeBlobKey beforehand to derive it, and pass NULL for expectedKey.) This function does not close the writer. </p><dl class="section note"><dt>Note</dt><dd>The caller must use a lock for WriteStream when this function is called. </dd></dl>

</div>
</div>
<a id="ga1b8ff205c41f0cb696f0da1dfdb6f6c7" name="ga1b8ff205c41f0cb696f0da1dfdb6f6c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1b8ff205c41f0cb696f0da1dfdb6f6c7">&#9670;&#160;</a></span>c4stream_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> size_t c4stream_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga02b4b239f9add8f17da2971e1fd6eea6">C4ReadStream</a> *</td>          <td class="paramname"><span class="paramname"><em>stream</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>buffer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>maxBytesToRead</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em>error</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads from an open stream. </p>
<dl class="section note"><dt>Note</dt><dd>The caller must use a lock for ReadStream when this function is called. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The open stream to read from </td></tr>
    <tr><td class="paramname">buffer</td><td>Where to copy the read data to </td></tr>
    <tr><td class="paramname">maxBytesToRead</td><td>The maximum number of bytes to read to the buffer </td></tr>
    <tr><td class="paramname">error</td><td>Error is returned here </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The actual number of bytes read, or 0 if an error occurred </dd></dl>

</div>
</div>
<a id="gaefd6d41e571414eef9a8cd814fbd281b" name="gaefd6d41e571414eef9a8cd814fbd281b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaefd6d41e571414eef9a8cd814fbd281b">&#9670;&#160;</a></span>c4stream_seek()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4stream_seek </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga02b4b239f9add8f17da2971e1fd6eea6">C4ReadStream</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t</td>          <td class="paramname"><span class="paramname"><em>position</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Moves to a random location in the stream; the next c4stream_read call will read from that location. </p>
<dl class="section note"><dt>Note</dt><dd>The caller must use a lock for ReadStram when this function is called. </dd></dl>

</div>
</div>
<a id="gafcb6b0d42c1ed2fd933d1c5fc8c4dbce" name="gafcb6b0d42c1ed2fd933d1c5fc8c4dbce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafcb6b0d42c1ed2fd933d1c5fc8c4dbce">&#9670;&#160;</a></span>c4stream_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4stream_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga4a238757c9baa9a4fcea8f03d42dfa15">C4WriteStream</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *</td>          <td class="paramname"><span class="paramname"><em>bytes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>length</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes data to a stream. </p>
<dl class="section note"><dt>Note</dt><dd>The caller must use a lock for WriteStream when this function is called. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
