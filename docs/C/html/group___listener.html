<!--
Copyright 2021-Present Couchbase, Inc.
Use of this software is governed by the Business Source License included in
the file licenses/BSL-Couchbase.txt.  As of the Change Date specified in that
file, in accordance with the Business Source License, use of this software will
be governed by the Apache License, Version 2.0, included in the file
licenses/APL2.txt.
-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LiteCore: Network Listener: REST API and Sync Server</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LiteCore
   </div>
   <div id="projectbrief">Couchbase Lite cross-platform core implementation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Network Listener: REST API and Sync Server</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_c4_t_l_s_config.html">C4TLSConfig</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">TLS configuration for C4Listener.  <a href="struct_c4_t_l_s_config.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_c4_listener_config.html">C4ListenerConfig</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configuration for a C4Listener.  <a href="struct_c4_listener_config.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gaf0da0563dd9593449dd4700a314771b3"><td class="memItemLeft" align="right" valign="top">typedef bool(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___listener.html#gaf0da0563dd9593449dd4700a314771b3">C4ListenerCertAuthCallback</a>) (<a class="el" href="group___base.html#ga5e5ecc7839088461114e2ea751124156">C4Listener</a> *listener, <a class="el" href="group___base.html#gac99d7d179bccd9bbaf29b28272975b47">C4Slice</a> clientCertData, void *context)</td></tr>
<tr class="memdesc:gaf0da0563dd9593449dd4700a314771b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when a client connects, during the TLS handshake, if a client certificate is received.  <a href="#gaf0da0563dd9593449dd4700a314771b3">More...</a><br /></td></tr>
<tr class="separator:gaf0da0563dd9593449dd4700a314771b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gade7c7cc627bcbd73b774fc287595362d"><td class="memItemLeft" align="right" valign="top">typedef bool(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___listener.html#gade7c7cc627bcbd73b774fc287595362d">C4ListenerHTTPAuthCallback</a>) (<a class="el" href="group___base.html#ga5e5ecc7839088461114e2ea751124156">C4Listener</a> *listener, <a class="el" href="group___base.html#gac99d7d179bccd9bbaf29b28272975b47">C4Slice</a> authHeader, void *context)</td></tr>
<tr class="memdesc:gade7c7cc627bcbd73b774fc287595362d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when a client connects, after the TLS handshake (if any), when the initial HTTP request is received.  <a href="#gade7c7cc627bcbd73b774fc287595362d">More...</a><br /></td></tr>
<tr class="separator:gade7c7cc627bcbd73b774fc287595362d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga49d05e191b69d6e99d05c1e9ee8d3b79"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___listener.html#ga49d05e191b69d6e99d05c1e9ee8d3b79">C4ListenerAPIs</a> : unsigned { <a class="el" href="group___listener.html#gga49d05e191b69d6e99d05c1e9ee8d3b79a45e0c3e3bf4bc5cdea77856d1c59e2a7">kC4RESTAPI</a> = 0x01, 
<a class="el" href="group___listener.html#gga49d05e191b69d6e99d05c1e9ee8d3b79a4de776a2a31eafbb81cac7020a88bada">kC4SyncAPI</a> = 0x02
 }</td></tr>
<tr class="memdesc:ga49d05e191b69d6e99d05c1e9ee8d3b79"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flags indicating which network API(s) to serve.  <a href="group___listener.html#ga49d05e191b69d6e99d05c1e9ee8d3b79">More...</a><br /></td></tr>
<tr class="separator:ga49d05e191b69d6e99d05c1e9ee8d3b79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga86032450ec2ae6d6696789ba33c7e511"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___listener.html#ga86032450ec2ae6d6696789ba33c7e511">C4PrivateKeyRepresentation</a> : unsigned { <a class="el" href="group___listener.html#gga86032450ec2ae6d6696789ba33c7e511a906ffb951c979bda7242b37f9f52d692">kC4PrivateKeyFromCert</a>, 
<a class="el" href="group___listener.html#gga86032450ec2ae6d6696789ba33c7e511a6c43989d26b1e6f151d6ccb0c2ee767e">kC4PrivateKeyFromKey</a>
 }</td></tr>
<tr class="memdesc:ga86032450ec2ae6d6696789ba33c7e511"><td class="mdescLeft">&#160;</td><td class="mdescRight">Different ways to provide TLS private keys.  <a href="group___listener.html#ga86032450ec2ae6d6696789ba33c7e511">More...</a><br /></td></tr>
<tr class="separator:ga86032450ec2ae6d6696789ba33c7e511"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gab3e82cbd3d700758f22afd403b1d1205"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___listener.html#ga49d05e191b69d6e99d05c1e9ee8d3b79">C4ListenerAPIs</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___listener.html#gab3e82cbd3d700758f22afd403b1d1205">c4listener_availableAPIs</a> (void)</td></tr>
<tr class="memdesc:gab3e82cbd3d700758f22afd403b1d1205"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns flags for the available APIs in this build (REST, sync, or both.)  <a href="#gab3e82cbd3d700758f22afd403b1d1205">More...</a><br /></td></tr>
<tr class="separator:gab3e82cbd3d700758f22afd403b1d1205"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga73e5ae60f71d9de8cbe58775983a129a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___base.html#ga5e5ecc7839088461114e2ea751124156">C4Listener</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___listener.html#ga73e5ae60f71d9de8cbe58775983a129a">c4listener_start</a> (const <a class="el" href="struct_c4_listener_config.html">C4ListenerConfig</a> *config, <a class="el" href="struct_c4_error.html">C4Error</a> *error)</td></tr>
<tr class="memdesc:ga73e5ae60f71d9de8cbe58775983a129a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts a new listener.  <a href="#ga73e5ae60f71d9de8cbe58775983a129a">More...</a><br /></td></tr>
<tr class="separator:ga73e5ae60f71d9de8cbe58775983a129a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga459b508f50c474050111021272fac1c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___listener.html#ga459b508f50c474050111021272fac1c1">c4listener_free</a> (<a class="el" href="group___base.html#ga5e5ecc7839088461114e2ea751124156">C4Listener</a> *listener)</td></tr>
<tr class="memdesc:ga459b508f50c474050111021272fac1c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes and disposes a listener.  <a href="#ga459b508f50c474050111021272fac1c1">More...</a><br /></td></tr>
<tr class="separator:ga459b508f50c474050111021272fac1c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga20e088f81301a58238c6e516e985f3a1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___listener.html#ga20e088f81301a58238c6e516e985f3a1">c4listener_shareDB</a> (<a class="el" href="group___base.html#ga5e5ecc7839088461114e2ea751124156">C4Listener</a> *listener, <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> name, <a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *db, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:ga20e088f81301a58238c6e516e985f3a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes a database available from the network.  <a href="#ga20e088f81301a58238c6e516e985f3a1">More...</a><br /></td></tr>
<tr class="separator:ga20e088f81301a58238c6e516e985f3a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3e3703d45997de86d62c9871a49212bb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___listener.html#ga3e3703d45997de86d62c9871a49212bb">c4listener_unshareDB</a> (<a class="el" href="group___base.html#ga5e5ecc7839088461114e2ea751124156">C4Listener</a> *listener, <a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *db, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:ga3e3703d45997de86d62c9871a49212bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes a previously-shared database unavailable.  <a href="#ga3e3703d45997de86d62c9871a49212bb">More...</a><br /></td></tr>
<tr class="separator:ga3e3703d45997de86d62c9871a49212bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga93150e38ae6a264ed33aa6633f9ac486"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__types.html#ga384f95fe181d6050d5757ff85bb8bc82">FLMutableArray</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___listener.html#ga93150e38ae6a264ed33aa6633f9ac486">c4listener_getURLs</a> (const <a class="el" href="group___base.html#ga5e5ecc7839088461114e2ea751124156">C4Listener</a> *listener, <a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *db, <a class="el" href="group___listener.html#ga49d05e191b69d6e99d05c1e9ee8d3b79">C4ListenerAPIs</a> api, <a class="el" href="struct_c4_error.html">C4Error</a> *err)</td></tr>
<tr class="memdesc:ga93150e38ae6a264ed33aa6633f9ac486"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the URL(s) of a database being shared, or of the root, separated by "\n" bytes.  <a href="#ga93150e38ae6a264ed33aa6633f9ac486">More...</a><br /></td></tr>
<tr class="separator:ga93150e38ae6a264ed33aa6633f9ac486"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2b547edd34af87265d907c4913da1cc1"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___listener.html#ga2b547edd34af87265d907c4913da1cc1">c4listener_getPort</a> (const <a class="el" href="group___base.html#ga5e5ecc7839088461114e2ea751124156">C4Listener</a> *listener)</td></tr>
<tr class="memdesc:ga2b547edd34af87265d907c4913da1cc1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the port number the listener is accepting connections on.  <a href="#ga2b547edd34af87265d907c4913da1cc1">More...</a><br /></td></tr>
<tr class="separator:ga2b547edd34af87265d907c4913da1cc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf861811c905530dcb338008b93ba5ce6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___listener.html#gaf861811c905530dcb338008b93ba5ce6">c4listener_getConnectionStatus</a> (const <a class="el" href="group___base.html#ga5e5ecc7839088461114e2ea751124156">C4Listener</a> *listener, unsigned *connectionCount, unsigned *activeConnectionCount)</td></tr>
<tr class="memdesc:gaf861811c905530dcb338008b93ba5ce6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of client connections, and how many of those are currently active.  <a href="#gaf861811c905530dcb338008b93ba5ce6">More...</a><br /></td></tr>
<tr class="separator:gaf861811c905530dcb338008b93ba5ce6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga02b9dd69898d987593c4939caa498432"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___base.html#ga9621f4998e1f10a82cca421fede5588a">C4StringResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___listener.html#ga02b9dd69898d987593c4939caa498432">c4db_URINameFromPath</a> (<a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> path)</td></tr>
<tr class="memdesc:ga02b9dd69898d987593c4939caa498432"><td class="mdescLeft">&#160;</td><td class="mdescRight">A convenience that, given a filesystem path to a database, returns the database name for use in an HTTP URI path.  <a href="#ga02b9dd69898d987593c4939caa498432">More...</a><br /></td></tr>
<tr class="separator:ga02b9dd69898d987593c4939caa498432"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gaf0da0563dd9593449dd4700a314771b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf0da0563dd9593449dd4700a314771b3">&#9670;&nbsp;</a></span>C4ListenerCertAuthCallback</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef bool(* C4ListenerCertAuthCallback) (<a class="el" href="group___base.html#ga5e5ecc7839088461114e2ea751124156">C4Listener</a> *listener, <a class="el" href="group___base.html#gac99d7d179bccd9bbaf29b28272975b47">C4Slice</a> clientCertData, void *context)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called when a client connects, during the TLS handshake, if a client certificate is received. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">listener</td><td>The C4Listener handling the connection. </td></tr>
    <tr><td class="paramname">clientCertData</td><td>The client's X.509 certificate in DER encoding. </td></tr>
    <tr><td class="paramname">context</td><td>The <code>tlsCallbackContext</code> from the <code><a class="el" href="struct_c4_t_l_s_config.html" title="TLS configuration for C4Listener.">C4TLSConfig</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True to allow the connection, false to refuse it. </dd></dl>

</div>
</div>
<a id="gade7c7cc627bcbd73b774fc287595362d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gade7c7cc627bcbd73b774fc287595362d">&#9670;&nbsp;</a></span>C4ListenerHTTPAuthCallback</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef bool(* C4ListenerHTTPAuthCallback) (<a class="el" href="group___base.html#ga5e5ecc7839088461114e2ea751124156">C4Listener</a> *listener, <a class="el" href="group___base.html#gac99d7d179bccd9bbaf29b28272975b47">C4Slice</a> authHeader, void *context)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called when a client connects, after the TLS handshake (if any), when the initial HTTP request is received. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">listener</td><td>The C4Listener handling the connection. </td></tr>
    <tr><td class="paramname">authHeader</td><td>The "Authorization" header value from the client's HTTP request, or null. </td></tr>
    <tr><td class="paramname">context</td><td>The <code>callbackContext</code> from the listener config. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True to allow the connection, false to refuse it. </dd></dl>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga49d05e191b69d6e99d05c1e9ee8d3b79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga49d05e191b69d6e99d05c1e9ee8d3b79">&#9670;&nbsp;</a></span>C4ListenerAPIs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___listener.html#ga49d05e191b69d6e99d05c1e9ee8d3b79">C4ListenerAPIs</a> : unsigned</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flags indicating which network API(s) to serve. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga49d05e191b69d6e99d05c1e9ee8d3b79a45e0c3e3bf4bc5cdea77856d1c59e2a7"></a>kC4RESTAPI&#160;</td><td class="fielddoc"><p>CouchDB-like REST API. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga49d05e191b69d6e99d05c1e9ee8d3b79a4de776a2a31eafbb81cac7020a88bada"></a>kC4SyncAPI&#160;</td><td class="fielddoc"><p>Replication server. </p>
</td></tr>
</table>

</div>
</div>
<a id="ga86032450ec2ae6d6696789ba33c7e511"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga86032450ec2ae6d6696789ba33c7e511">&#9670;&nbsp;</a></span>C4PrivateKeyRepresentation</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___listener.html#ga86032450ec2ae6d6696789ba33c7e511">C4PrivateKeyRepresentation</a> : unsigned</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Different ways to provide TLS private keys. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga86032450ec2ae6d6696789ba33c7e511a906ffb951c979bda7242b37f9f52d692"></a>kC4PrivateKeyFromCert&#160;</td><td class="fielddoc"><p>Key in secure storage, associated with certificate. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga86032450ec2ae6d6696789ba33c7e511a6c43989d26b1e6f151d6ccb0c2ee767e"></a>kC4PrivateKeyFromKey&#160;</td><td class="fielddoc"><p>Key from the provided key pair. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga02b9dd69898d987593c4939caa498432"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga02b9dd69898d987593c4939caa498432">&#9670;&nbsp;</a></span>c4db_URINameFromPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___base.html#ga9621f4998e1f10a82cca421fede5588a">C4StringResult</a> c4db_URINameFromPath </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a>&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A convenience that, given a filesystem path to a database, returns the database name for use in an HTTP URI path. </p>
<ul>
<li>The directory portion of the path and the ".cblite2" extension are removed.</li>
<li>Any leading "_" is replaced with a "-".</li>
<li>Any control characters or slashes are replaced with "-". <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>The filesystem path of a database. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A name that can be used as a URI path component, or NULL if the path is not a valid database path (does not end with ".cblite2".) </dd></dl>
</li>
</ul>

</div>
</div>
<a id="gab3e82cbd3d700758f22afd403b1d1205"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab3e82cbd3d700758f22afd403b1d1205">&#9670;&nbsp;</a></span>c4listener_availableAPIs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___listener.html#ga49d05e191b69d6e99d05c1e9ee8d3b79">C4ListenerAPIs</a> c4listener_availableAPIs </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns flags for the available APIs in this build (REST, sync, or both.) </p>

</div>
</div>
<a id="ga459b508f50c474050111021272fac1c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga459b508f50c474050111021272fac1c1">&#9670;&nbsp;</a></span>c4listener_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void c4listener_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga5e5ecc7839088461114e2ea751124156">C4Listener</a> *&#160;</td>
          <td class="paramname"><em>listener</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes and disposes a listener. </p>

</div>
</div>
<a id="gaf861811c905530dcb338008b93ba5ce6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf861811c905530dcb338008b93ba5ce6">&#9670;&nbsp;</a></span>c4listener_getConnectionStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void c4listener_getConnectionStatus </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group___base.html#ga5e5ecc7839088461114e2ea751124156">C4Listener</a> *&#160;</td>
          <td class="paramname"><em>listener</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned *&#160;</td>
          <td class="paramname"><em>connectionCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned *&#160;</td>
          <td class="paramname"><em>activeConnectionCount</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the number of client connections, and how many of those are currently active. </p>
<p>Either parameter can be NULL if you don't care about it. </p>

</div>
</div>
<a id="ga2b547edd34af87265d907c4913da1cc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2b547edd34af87265d907c4913da1cc1">&#9670;&nbsp;</a></span>c4listener_getPort()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t c4listener_getPort </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group___base.html#ga5e5ecc7839088461114e2ea751124156">C4Listener</a> *&#160;</td>
          <td class="paramname"><em>listener</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the port number the listener is accepting connections on. </p>
<p>This is useful if you didn't specify a port in the config (<code>port</code>=0), so you can find out which port the kernel picked. </p>

</div>
</div>
<a id="ga93150e38ae6a264ed33aa6633f9ac486"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga93150e38ae6a264ed33aa6633f9ac486">&#9670;&nbsp;</a></span>c4listener_getURLs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__types.html#ga384f95fe181d6050d5757ff85bb8bc82">FLMutableArray</a> c4listener_getURLs </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group___base.html#ga5e5ecc7839088461114e2ea751124156">C4Listener</a> *&#160;</td>
          <td class="paramname"><em>listener</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___listener.html#ga49d05e191b69d6e99d05c1e9ee8d3b79">C4ListenerAPIs</a>&#160;</td>
          <td class="paramname"><em>api</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>err</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the URL(s) of a database being shared, or of the root, separated by "\n" bytes. </p>
<p>The URLs will differ only in their hostname &ndash; there will be one for each IP address or known hostname of the computer, or of the network interface.</p>
<p>WARNING: Link-local IPv6 addresses are included in this list. However, due to IPv6 specification rules, a scope ID is also required to connect to these addresses. So if the address starts with fe80:: you will need to take care on the other side to also incorporate the scope of of the client network interface into the URL when connecting (in short, it's probably best to avoid these but they are there if you would like to try) </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">listener</td><td>The active listener. </td></tr>
    <tr><td class="paramname">db</td><td>A database being shared, or NULL to get the listener's root URL(s). </td></tr>
    <tr><td class="paramname">api</td><td>The API variant for which the URLs should be retrieved. If the listener is not running in the given mode, or more than one mode is given, an error is returned </td></tr>
    <tr><td class="paramname">err</td><td>The error information, if any </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Fleece array of or more URL strings, or null if an error occurred. Caller is responsible for releasing the result. </dd></dl>

</div>
</div>
<a id="ga20e088f81301a58238c6e516e985f3a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga20e088f81301a58238c6e516e985f3a1">&#9670;&nbsp;</a></span>c4listener_shareDB()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool c4listener_shareDB </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga5e5ecc7839088461114e2ea751124156">C4Listener</a> *&#160;</td>
          <td class="paramname"><em>listener</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a>&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Makes a database available from the network. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">listener</td><td>The listener that should share the database. </td></tr>
    <tr><td class="paramname">name</td><td>The URI name to share it under, i.e. the path component in the URL. If this is left null, a name will be chosen based as though you had called <a class="el" href="group___listener.html#ga02b9dd69898d987593c4939caa498432">c4db_URINameFromPath</a>. </td></tr>
    <tr><td class="paramname">db</td><td>The database to share. </td></tr>
    <tr><td class="paramname">outError</td><td>On failure, the error info is stored here if non-NULL. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, false if the name is invalid as a URI component. </dd></dl>

</div>
</div>
<a id="ga73e5ae60f71d9de8cbe58775983a129a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga73e5ae60f71d9de8cbe58775983a129a">&#9670;&nbsp;</a></span>c4listener_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___base.html#ga5e5ecc7839088461114e2ea751124156">C4Listener</a>* c4listener_start </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_c4_listener_config.html">C4ListenerConfig</a> *&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts a new listener. </p>

</div>
</div>
<a id="ga3e3703d45997de86d62c9871a49212bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3e3703d45997de86d62c9871a49212bb">&#9670;&nbsp;</a></span>c4listener_unshareDB()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool c4listener_unshareDB </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga5e5ecc7839088461114e2ea751124156">C4Listener</a> *&#160;</td>
          <td class="paramname"><em>listener</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Makes a previously-shared database unavailable. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
