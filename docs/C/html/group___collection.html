<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LiteCore: Collections and Scopes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LiteCore
   </div>
   <div id="projectbrief">Couchbase Lite cross-platform core implementation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Collections and Scopes</div></div>
</div><!--header-->
<div class="contents">

<p>A <code>C4Collection</code> represents a <b>Collection</b>, a named grouping of documents in a database.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Lifecycle</h2></td></tr>
<tr class="memitem:ga62bba40edc4ca9e549a7075f71fcbc6f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#ga62bba40edc4ca9e549a7075f71fcbc6f">c4db_getDefaultCollection</a> (<a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *db, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:ga62bba40edc4ca9e549a7075f71fcbc6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the default collection, whose name is "`_default`" (<code>kC4DefaultCollectionName</code>).  <br /></td></tr>
<tr class="separator:ga62bba40edc4ca9e549a7075f71fcbc6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga443bc404135b96e305d926f13a0dec5a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#ga443bc404135b96e305d926f13a0dec5a">c4db_hasCollection</a> (<a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *db, <a class="el" href="struct_c4_collection_spec.html">C4CollectionSpec</a> spec)</td></tr>
<tr class="memdesc:ga443bc404135b96e305d926f13a0dec5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the collection exists.  <br /></td></tr>
<tr class="separator:ga443bc404135b96e305d926f13a0dec5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6df288732b7bd7eb347070075e63efd0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#ga6df288732b7bd7eb347070075e63efd0">c4db_hasScope</a> (<a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *db, <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> name)</td></tr>
<tr class="memdesc:ga6df288732b7bd7eb347070075e63efd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the named scope exists.  <br /></td></tr>
<tr class="separator:ga6df288732b7bd7eb347070075e63efd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad7131cbd8d585aff702e999663ccf460"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#gad7131cbd8d585aff702e999663ccf460">c4db_getCollection</a> (<a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *db, <a class="el" href="struct_c4_collection_spec.html">C4CollectionSpec</a> spec, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:gad7131cbd8d585aff702e999663ccf460"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the existing collection with the given name &amp; scope, or NULL if it doesn't exist.  <br /></td></tr>
<tr class="separator:gad7131cbd8d585aff702e999663ccf460"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1312f2efbae92939f3b2be4a7dd6d3df"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#ga1312f2efbae92939f3b2be4a7dd6d3df">c4db_createCollection</a> (<a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *db, <a class="el" href="struct_c4_collection_spec.html">C4CollectionSpec</a> spec, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:ga1312f2efbae92939f3b2be4a7dd6d3df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates and returns an empty collection with the given name &amp; scope.  <br /></td></tr>
<tr class="separator:ga1312f2efbae92939f3b2be4a7dd6d3df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac33bd525657791a91ac91ac664754bef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#gac33bd525657791a91ac91ac664754bef">c4db_deleteCollection</a> (<a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *db, <a class="el" href="struct_c4_collection_spec.html">C4CollectionSpec</a> spec, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:gac33bd525657791a91ac91ac664754bef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes the collection with the given name &amp; scope.  <br /></td></tr>
<tr class="separator:gac33bd525657791a91ac91ac664754bef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga94001e9bc1a796c3cb5e6dc92e83b775"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group__types.html#ga384f95fe181d6050d5757ff85bb8bc82">FLMutableArray</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#ga94001e9bc1a796c3cb5e6dc92e83b775">c4db_collectionNames</a> (<a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *db, <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> inScope, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:ga94001e9bc1a796c3cb5e6dc92e83b775"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the names of all existing collections in the given scope, in the order in which they were created.  <br /></td></tr>
<tr class="separator:ga94001e9bc1a796c3cb5e6dc92e83b775"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabb387fb1dc8940baaa98362b9e7b6c56"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group__types.html#ga384f95fe181d6050d5757ff85bb8bc82">FLMutableArray</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#gabb387fb1dc8940baaa98362b9e7b6c56">c4db_scopeNames</a> (<a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *db, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:gabb387fb1dc8940baaa98362b9e7b6c56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the names of all existing scopes, in the order in which they were created.  <br /></td></tr>
<tr class="separator:gabb387fb1dc8940baaa98362b9e7b6c56"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Accessors</h2></td></tr>
<tr class="memitem:ga6510c6be2ab73ca5b9b17f5dfb1a1af9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#ga6510c6be2ab73ca5b9b17f5dfb1a1af9">c4coll_isValid</a> (<a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *)</td></tr>
<tr class="memdesc:ga6510c6be2ab73ca5b9b17f5dfb1a1af9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns false if this collection has been deleted, or its database closed.  <br /></td></tr>
<tr class="separator:ga6510c6be2ab73ca5b9b17f5dfb1a1af9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga95c4edbc16b87f945c7b834b403704a3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="struct_c4_collection_spec.html">C4CollectionSpec</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#ga95c4edbc16b87f945c7b834b403704a3">c4coll_getSpec</a> (<a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *)</td></tr>
<tr class="memdesc:ga95c4edbc16b87f945c7b834b403704a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the name and scope of the collection.  <br /></td></tr>
<tr class="separator:ga95c4edbc16b87f945c7b834b403704a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5459d0132cd8595904e6510c7766562b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#ga5459d0132cd8595904e6510c7766562b">c4coll_getDatabase</a> (<a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *)</td></tr>
<tr class="memdesc:ga5459d0132cd8595904e6510c7766562b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the database containing the collection, or NULL if the collection is invalid.  <br /></td></tr>
<tr class="separator:ga5459d0132cd8595904e6510c7766562b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga443ebefc525f871ce84a7ca5fb5960d1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#ga443ebefc525f871ce84a7ca5fb5960d1">c4coll_getDocumentCount</a> (<a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *)</td></tr>
<tr class="memdesc:ga443ebefc525f871ce84a7ca5fb5960d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of (undeleted) documents in the collection.  <br /></td></tr>
<tr class="separator:ga443ebefc525f871ce84a7ca5fb5960d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf025f7375353b5c1fa41b151445d85b4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga6c2d959939ef287ba3f2ee719c949229">C4SequenceNumber</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#gaf025f7375353b5c1fa41b151445d85b4">c4coll_getLastSequence</a> (<a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *)</td></tr>
<tr class="memdesc:gaf025f7375353b5c1fa41b151445d85b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the latest sequence number allocated to a revision.  <br /></td></tr>
<tr class="separator:gaf025f7375353b5c1fa41b151445d85b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Documents</h2></td></tr>
<tr class="memitem:ga8e97e4b44231cd491a68160516a195b4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="struct_c4_document.html">C4Document</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#ga8e97e4b44231cd491a68160516a195b4">c4coll_getDoc</a> (<a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *collection, <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> docID, bool mustExist, <a class="el" href="group___documents.html#gadb2bbf97a307f0e83b226949404ad268">C4DocContentLevel</a> content, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:ga8e97e4b44231cd491a68160516a195b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a document from the collection given its ID.  <br /></td></tr>
<tr class="separator:ga8e97e4b44231cd491a68160516a195b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac343fe06d73ad2ab9e2dee351c6b4425"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="struct_c4_document.html">C4Document</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#gac343fe06d73ad2ab9e2dee351c6b4425">c4coll_getDocBySequence</a> (<a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *collection, <a class="el" href="group___base.html#ga6c2d959939ef287ba3f2ee719c949229">C4SequenceNumber</a>, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:gac343fe06d73ad2ab9e2dee351c6b4425"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a document from the collection given its sequence number.  <br /></td></tr>
<tr class="separator:gac343fe06d73ad2ab9e2dee351c6b4425"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga68d544be3cc8969718fe71b453b869bc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="struct_c4_document.html">C4Document</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#ga68d544be3cc8969718fe71b453b869bc">c4coll_putDoc</a> (<a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *collection, const <a class="el" href="struct_c4_doc_put_request.html">C4DocPutRequest</a> *request, size_t *outCommonAncestorIndex, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:ga68d544be3cc8969718fe71b453b869bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">A high-level Put operation, to insert a new or downloaded revision.  <br /></td></tr>
<tr class="separator:ga68d544be3cc8969718fe71b453b869bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga59376bff7c5391486b80e675486472e3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="struct_c4_document.html">C4Document</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#ga59376bff7c5391486b80e675486472e3">c4coll_createDoc</a> (<a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *collection, <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> docID, <a class="el" href="group___base.html#gac99d7d179bccd9bbaf29b28272975b47">C4Slice</a> body, <a class="el" href="group___documents.html#gafc0b28ce70a5c3a9b8d968859e04b2c0">C4RevisionFlags</a> revisionFlags, <a class="el" href="struct_c4_error.html">C4Error</a> *error)</td></tr>
<tr class="memdesc:ga59376bff7c5391486b80e675486472e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convenience function to create a new document.  <br /></td></tr>
<tr class="separator:ga59376bff7c5391486b80e675486472e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa5e33f9335c58b629ddd51d0f8941d6d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#gaa5e33f9335c58b629ddd51d0f8941d6d">c4coll_moveDoc</a> (<a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *collection, <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> docID, <a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *toCollection, <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> newDocID, <a class="el" href="struct_c4_error.html">C4Error</a> *error)</td></tr>
<tr class="memdesc:gaa5e33f9335c58b629ddd51d0f8941d6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Moves a document to another collection, possibly with a different docID.  <br /></td></tr>
<tr class="separator:gaa5e33f9335c58b629ddd51d0f8941d6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Purging and Expiration</h2></td></tr>
<tr class="memitem:gab95204b77adc8499c3a40403c8ac0343"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#gab95204b77adc8499c3a40403c8ac0343">c4coll_purgeDoc</a> (<a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *collection, <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> docID, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:gab95204b77adc8499c3a40403c8ac0343"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes all trace of a document and its revisions from the collection.  <br /></td></tr>
<tr class="separator:gab95204b77adc8499c3a40403c8ac0343"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa644a91130945a5ebb7bbd70a30a305c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#gaa644a91130945a5ebb7bbd70a30a305c">c4coll_setDocExpiration</a> (<a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *collection, <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> docID, <a class="el" href="group___base.html#ga4e9a8e237399a3869086cae270783476">C4Timestamp</a> timestamp, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:gaa644a91130945a5ebb7bbd70a30a305c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets an expiration date on a document.  <br /></td></tr>
<tr class="separator:gaa644a91130945a5ebb7bbd70a30a305c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabdfd46f8258d30a67dbd96974c6bd3a2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga4e9a8e237399a3869086cae270783476">C4Timestamp</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#gabdfd46f8258d30a67dbd96974c6bd3a2">c4coll_getDocExpiration</a> (<a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *collection, <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> docID, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:gabdfd46f8258d30a67dbd96974c6bd3a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the expiration time of a document, if one has been set, else 0.  <br /></td></tr>
<tr class="separator:gabdfd46f8258d30a67dbd96974c6bd3a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1040719a13aee5e3eff7a7c328e8aa6a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga4e9a8e237399a3869086cae270783476">C4Timestamp</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#ga1040719a13aee5e3eff7a7c328e8aa6a">c4coll_nextDocExpiration</a> (<a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *)</td></tr>
<tr class="memdesc:ga1040719a13aee5e3eff7a7c328e8aa6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the time at which the next document expiration in this collection should take place, or 0 if there are no documents with expiration times.  <br /></td></tr>
<tr class="separator:ga1040719a13aee5e3eff7a7c328e8aa6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae1ab203a01999be148c3a71500b4dccd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#gae1ab203a01999be148c3a71500b4dccd">c4coll_purgeExpiredDocs</a> (<a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *, <a class="el" href="struct_c4_error.html">C4Error</a> *)</td></tr>
<tr class="memdesc:gae1ab203a01999be148c3a71500b4dccd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Purges all documents that have expired.  <br /></td></tr>
<tr class="separator:gae1ab203a01999be148c3a71500b4dccd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Indexes</h2></td></tr>
<tr class="memitem:ga4f7140a51b2af1d0151c047096daed1d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#ga4f7140a51b2af1d0151c047096daed1d">c4coll_createIndex</a> (<a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *collection, <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> name, <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> indexSpec, <a class="el" href="group___querying_d_b.html#ga23ce629032ce6fa439a0015788f2ff84">C4QueryLanguage</a> queryLanguage, <a class="el" href="group___indexing.html#gaf0b8613e821a59cfdea501bec2d661cb">C4IndexType</a> indexType, const <a class="el" href="struct_c4_index_options.html">C4IndexOptions</a> *indexOptions, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:ga4f7140a51b2af1d0151c047096daed1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a collection index, of the values of specific expressions across all documents.  <br /></td></tr>
<tr class="separator:ga4f7140a51b2af1d0151c047096daed1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9e7900ad681f118931245f5d14c6d037"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#ga9e7900ad681f118931245f5d14c6d037">c4coll_deleteIndex</a> (<a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *collection, <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> name, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:ga9e7900ad681f118931245f5d14c6d037"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes an index that was created by <code>c4coll_createIndex</code>.  <br /></td></tr>
<tr class="separator:ga9e7900ad681f118931245f5d14c6d037"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1cf934f4c7c596377797a8a32d69cbb1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga7641ec7c9f4339b65cc4aabc050d67d8">C4SliceResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___collection.html#ga1cf934f4c7c596377797a8a32d69cbb1">c4coll_getIndexesInfo</a> (<a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *collection, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:ga1cf934f4c7c596377797a8a32d69cbb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns information about all indexes in the collection.  <br /></td></tr>
<tr class="separator:ga1cf934f4c7c596377797a8a32d69cbb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>A <code>C4Collection</code> represents a <b>Collection</b>, a named grouping of documents in a database. </p>
<p>You can think of them as "folders" or "directories" for documents, or as SQL tables.</p>
<p>Each Collection provides:</p><ul>
<li>a namespace for documents (a "docID" is only unique within its Collection)</li>
<li>a queryable container, named in <code>FROM</code> and <code>JOIN</code> clauses.</li>
<li>a scope for indexes</li>
<li>a scope for document enumerators</li>
<li>independent sequence numbers</li>
</ul>
<p>Likewise, a <b>Scope</b> is a grouping of Collections, like a "parent folder".</p>
<p>Every database starts with a <b>default Collection</b>, whose name is <code>_default</code>, which exists in a <b>default Scope</b>, also named <code>_default</code>. If the database was created by an earlier version of LiteCore, all existing documents will be in the default Collection.</p>
<h2>Collection Naming</h2>
<p>In this API, collections are named by a <a class="el" href="struct_c4_collection_spec.html">C4CollectionSpec</a> struct, which simply contains two <code>FLString</code>s, first a collection name and second a scope name. Note that the collection name comes first (unlike in a N1QL query), so that the scope name can be left out if you're referring to the default scope. You can give a collection spec literally as e.g. <code>{C4STR("mycoll")}</code>, or with a scope, <code>{C4STR("mycoll"), C4STR("myscope")}</code>.</p>
<p>There are no API calls to create or delete Scopes. A Scope is created implicitly when you create the first Collection inside it, and deleted implicitly when you delete its last Collection.</p>
<h2>Legacy <code>C4Database</code> Functions</h2>
<p>Pre-existing functions that refer to documents / sequences / indexes without referring to Collections &ndash; such as <a class="el" href="group___documents.html#ga893f810f7fc9fba293bdeb2e9e034de5">c4doc_get</a> and <a class="el" href="group___database.html#gaedbb9a32f5e748a6ddf9d2b49c1f5743">c4db_getLastSequence</a> &ndash; still exist, but implicitly operate on the default Collection. In other words, they behave exactly the way they used to, but Collection-aware code should avoid them and use the new Collection API instead.</p>
<p>These functions will eventually be deprecated, then removed. As an aid in updating your code, you can define the C preprocessor symbol <code>C4_STRICT_COLLECTION_API</code> to suppress the definitions of those functions, which will turn all calls to them into errors.</p>
<h2><code>C4Collection</code> Lifespan</h2>
<p><code>C4Collection</code> is ref-counted, but most of the time you don't need to retain or release it. The <code>C4Database</code> owns its collections, so a <code>C4Collection</code> reference remains valid until either the database is closed, or that collection is deleted. At that point it becomes a dangling pointer :( If you keep a collection reference long-term, you should retain it so that the reference remains valid until you release it.</p>
<p>A retained C4Collection <em>object</em> still becomes invalid after it's deleted or its database closes. After that, most operations on it will fail (safely), returning <a class="el" href="group___errors.html#ggabc1eabfb65d7e55ac9efb8a95db4647fa53844dbddb547aee05eb3c6523121123">kC4ErrorNotOpen</a> or some null/zero result. You can tell whether a C4Collection is valid by calling <a class="el" href="group___collection.html#ga6510c6be2ab73ca5b9b17f5dfb1a1af9">c4coll_isValid</a>, or by checking whether <a class="el" href="group___collection.html#ga5459d0132cd8595904e6510c7766562b">c4coll_getDatabase</a> returns non-NULL.</p>
<h2>Other Documentation</h2>
<p>A few Collection functions are documented in other sections of the API docs:</p>
<ul>
<li>Enumeration-related functions (in <code><a class="el" href="c4_doc_enumerator_8h.html">c4DocEnumerator.h</a></code>):<ul>
<li><a class="el" href="group___doc_enumerator.html#ga6c733c7b1eaa179bcccb60d62a049c81">c4coll_enumerateChanges</a></li>
<li><a class="el" href="group___doc_enumerator.html#ga4d397529609ba484752e88c6329c54ab">c4coll_enumerateAllDocs</a></li>
</ul>
</li>
<li>Observer-related functions (in <code><a class="el" href="c4_observer_8h.html">c4Observer.h</a></code>):<ul>
<li><a class="el" href="group___observer.html#ga1097eaeb2a5f2fc0a4aff6945e00d22d">c4dbobs_createOnCollection</a></li>
<li><a class="el" href="group___observer.html#ga2f77ec9652580e262b94bf6765d582a1">c4docobs_createWithCollection</a> </li>
</ul>
</li>
</ul>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga59376bff7c5391486b80e675486472e3" name="ga59376bff7c5391486b80e675486472e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga59376bff7c5391486b80e675486472e3">&#9670;&#160;</a></span>c4coll_createDoc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="struct_c4_document.html">C4Document</a> * c4coll_createDoc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *&#160;</td>
          <td class="paramname"><em>collection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a>&#160;</td>
          <td class="paramname"><em>docID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#gac99d7d179bccd9bbaf29b28272975b47">C4Slice</a>&#160;</td>
          <td class="paramname"><em>body</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___documents.html#gafc0b28ce70a5c3a9b8d968859e04b2c0">C4RevisionFlags</a>&#160;</td>
          <td class="paramname"><em>revisionFlags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convenience function to create a new document. </p>
<p>This just a wrapper around <a class="el" href="group___collection.html#ga68d544be3cc8969718fe71b453b869bc">c4coll_putDoc</a>. If the document already exists, it will fail with the error <code>kC4ErrorConflict</code>. </p><dl class="section note"><dt>Note</dt><dd>You must call <a class="el" href="group___base.html#gab3de915958be3928c3a856ba4694a290">c4doc_release</a> when finished with the document. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">collection</td><td>The collection to create the document in </td></tr>
    <tr><td class="paramname">docID</td><td>Document ID to create; if null, a UUID will be generated </td></tr>
    <tr><td class="paramname">body</td><td>Body of the document </td></tr>
    <tr><td class="paramname">revisionFlags</td><td>The flags of the new revision </td></tr>
    <tr><td class="paramname">error</td><td>Information about any error that occurred </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, a new <a class="el" href="struct_c4_document.html" title="Describes a version-controlled document.">C4Document</a> with the new revision selected; else NULL. </dd></dl>

</div>
</div>
<a id="ga4f7140a51b2af1d0151c047096daed1d" name="ga4f7140a51b2af1d0151c047096daed1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4f7140a51b2af1d0151c047096daed1d">&#9670;&#160;</a></span>c4coll_createIndex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4coll_createIndex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *&#160;</td>
          <td class="paramname"><em>collection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a>&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a>&#160;</td>
          <td class="paramname"><em>indexSpec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___querying_d_b.html#ga23ce629032ce6fa439a0015788f2ff84">C4QueryLanguage</a>&#160;</td>
          <td class="paramname"><em>queryLanguage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___indexing.html#gaf0b8613e821a59cfdea501bec2d661cb">C4IndexType</a>&#160;</td>
          <td class="paramname"><em>indexType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_c4_index_options.html">C4IndexOptions</a> *&#160;</td>
          <td class="paramname"><em>indexOptions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a collection index, of the values of specific expressions across all documents. </p>
<p>The name is used to identify the index for later updating or deletion; if an index with the same name already exists, it will be replaced unless it has the exact same expressions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">collection</td><td>The collection to index. </td></tr>
    <tr><td class="paramname">name</td><td>The name of the index. Any existing index with the same name will be replaced, unless it has the identical expressions (in which case this is a no-op.) </td></tr>
    <tr><td class="paramname">indexSpec</td><td>The definition of the index in JSON or N1QL form. (See above.) </td></tr>
    <tr><td class="paramname">queryLanguage</td><td>The language of <code>indexSpec</code>, either JSON or N1QL. </td></tr>
    <tr><td class="paramname">indexType</td><td>The type of index (value or full-text.) </td></tr>
    <tr><td class="paramname">indexOptions</td><td>Options for the index. If NULL, each option will get a default value. </td></tr>
    <tr><td class="paramname">outError</td><td>On failure, will be set to the error status. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, false on failure. </dd></dl>

</div>
</div>
<a id="ga9e7900ad681f118931245f5d14c6d037" name="ga9e7900ad681f118931245f5d14c6d037"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9e7900ad681f118931245f5d14c6d037">&#9670;&#160;</a></span>c4coll_deleteIndex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4coll_deleteIndex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *&#160;</td>
          <td class="paramname"><em>collection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a>&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes an index that was created by <code>c4coll_createIndex</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">collection</td><td>The collection to index. </td></tr>
    <tr><td class="paramname">name</td><td>The name of the index to delete </td></tr>
    <tr><td class="paramname">outError</td><td>On failure, will be set to the error status. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, false on failure. </dd></dl>

</div>
</div>
<a id="ga5459d0132cd8595904e6510c7766562b" name="ga5459d0132cd8595904e6510c7766562b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5459d0132cd8595904e6510c7766562b">&#9670;&#160;</a></span>c4coll_getDatabase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> * c4coll_getDatabase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the database containing the collection, or NULL if the collection is invalid. </p>

</div>
</div>
<a id="ga8e97e4b44231cd491a68160516a195b4" name="ga8e97e4b44231cd491a68160516a195b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8e97e4b44231cd491a68160516a195b4">&#9670;&#160;</a></span>c4coll_getDoc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="struct_c4_document.html">C4Document</a> * c4coll_getDoc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *&#160;</td>
          <td class="paramname"><em>collection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a>&#160;</td>
          <td class="paramname"><em>docID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>mustExist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___documents.html#gadb2bbf97a307f0e83b226949404ad268">C4DocContentLevel</a>&#160;</td>
          <td class="paramname"><em>content</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets a document from the collection given its ID. </p>
<p>The current revision is selected (if the document exists.) </p><dl class="section note"><dt>Note</dt><dd>You must call <a class="el" href="group___base.html#gab3de915958be3928c3a856ba4694a290">c4doc_release</a> when finished with the document. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">collection</td><td>The collection to read from. </td></tr>
    <tr><td class="paramname">docID</td><td>The document's ID. </td></tr>
    <tr><td class="paramname">mustExist</td><td>Governs behavior if no document with that ID exists. If true, the call fails with error kC4NotFound. If false, a <a class="el" href="struct_c4_document.html" title="Describes a version-controlled document.">C4Document</a> with no contents is returned. </td></tr>
    <tr><td class="paramname">content</td><td>How much content to retrieve: metadata only, current revision, or all revisions. </td></tr>
    <tr><td class="paramname">outError</td><td>On failure, error information is stored here. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A new <a class="el" href="struct_c4_document.html" title="Describes a version-controlled document.">C4Document</a> instance (which must be released), or NULL. </dd></dl>

</div>
</div>
<a id="gac343fe06d73ad2ab9e2dee351c6b4425" name="gac343fe06d73ad2ab9e2dee351c6b4425"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac343fe06d73ad2ab9e2dee351c6b4425">&#9670;&#160;</a></span>c4coll_getDocBySequence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="struct_c4_document.html">C4Document</a> * c4coll_getDocBySequence </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *&#160;</td>
          <td class="paramname"><em>collection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga6c2d959939ef287ba3f2ee719c949229">C4SequenceNumber</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets a document from the collection given its sequence number. </p>
<dl class="section note"><dt>Note</dt><dd>You must call <code><a class="el" href="group___base.html#gab3de915958be3928c3a856ba4694a290">c4doc_release()</a></code> when finished with the document. <br  />
 </dd></dl>

</div>
</div>
<a id="gabdfd46f8258d30a67dbd96974c6bd3a2" name="gabdfd46f8258d30a67dbd96974c6bd3a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabdfd46f8258d30a67dbd96974c6bd3a2">&#9670;&#160;</a></span>c4coll_getDocExpiration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga4e9a8e237399a3869086cae270783476">C4Timestamp</a> c4coll_getDocExpiration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *&#160;</td>
          <td class="paramname"><em>collection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a>&#160;</td>
          <td class="paramname"><em>docID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the expiration time of a document, if one has been set, else 0. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">collection</td><td>The collection to set the expiration date in </td></tr>
    <tr><td class="paramname">docID</td><td>The ID of the document to check </td></tr>
    <tr><td class="paramname">outError</td><td>Information about any error that occurred </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The timestamp of the expiration date, in milliseconds since 1/1/1970, or 0 if the document does not expire, or -1 if an error occurred. </dd></dl>

</div>
</div>
<a id="ga443ebefc525f871ce84a7ca5fb5960d1" name="ga443ebefc525f871ce84a7ca5fb5960d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga443ebefc525f871ce84a7ca5fb5960d1">&#9670;&#160;</a></span>c4coll_getDocumentCount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> uint64_t c4coll_getDocumentCount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the number of (undeleted) documents in the collection. </p>

</div>
</div>
<a id="ga1cf934f4c7c596377797a8a32d69cbb1" name="ga1cf934f4c7c596377797a8a32d69cbb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1cf934f4c7c596377797a8a32d69cbb1">&#9670;&#160;</a></span>c4coll_getIndexesInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga7641ec7c9f4339b65cc4aabc050d67d8">C4SliceResult</a> c4coll_getIndexesInfo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *&#160;</td>
          <td class="paramname"><em>collection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns information about all indexes in the collection. </p>
<p>The result is a Fleece-encoded array of dictionaries, one per index. Each dictionary has keys <code>"name"</code>, <code>"type"</code> (a <code>C4IndexType</code>), and <code>"expr"</code> (the source expression). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">collection</td><td>The collection to check </td></tr>
    <tr><td class="paramname">outError</td><td>On failure, will be set to the error status. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Fleece-encoded array of dictionaries, or NULL on failure. </dd></dl>

</div>
</div>
<a id="gaf025f7375353b5c1fa41b151445d85b4" name="gaf025f7375353b5c1fa41b151445d85b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf025f7375353b5c1fa41b151445d85b4">&#9670;&#160;</a></span>c4coll_getLastSequence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga6c2d959939ef287ba3f2ee719c949229">C4SequenceNumber</a> c4coll_getLastSequence </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the latest sequence number allocated to a revision. </p>

</div>
</div>
<a id="ga95c4edbc16b87f945c7b834b403704a3" name="ga95c4edbc16b87f945c7b834b403704a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga95c4edbc16b87f945c7b834b403704a3">&#9670;&#160;</a></span>c4coll_getSpec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="struct_c4_collection_spec.html">C4CollectionSpec</a> c4coll_getSpec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the name and scope of the collection. </p>

</div>
</div>
<a id="ga6510c6be2ab73ca5b9b17f5dfb1a1af9" name="ga6510c6be2ab73ca5b9b17f5dfb1a1af9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6510c6be2ab73ca5b9b17f5dfb1a1af9">&#9670;&#160;</a></span>c4coll_isValid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4coll_isValid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns false if this collection has been deleted, or its database closed. </p>

</div>
</div>
<a id="gaa5e33f9335c58b629ddd51d0f8941d6d" name="gaa5e33f9335c58b629ddd51d0f8941d6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa5e33f9335c58b629ddd51d0f8941d6d">&#9670;&#160;</a></span>c4coll_moveDoc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4coll_moveDoc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *&#160;</td>
          <td class="paramname"><em>collection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a>&#160;</td>
          <td class="paramname"><em>docID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *&#160;</td>
          <td class="paramname"><em>toCollection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a>&#160;</td>
          <td class="paramname"><em>newDocID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Moves a document to another collection, possibly with a different docID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">collection</td><td>The document's original collection. </td></tr>
    <tr><td class="paramname">docID</td><td>The ID of the document to move. </td></tr>
    <tr><td class="paramname">toCollection</td><td>The collection to move to. </td></tr>
    <tr><td class="paramname">newDocID</td><td>The docID in the new collection, or a NULL slice to keep the original ID. </td></tr>
    <tr><td class="paramname">error</td><td>Information about any error that occurred </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, false on failure. </dd></dl>

</div>
</div>
<a id="ga1040719a13aee5e3eff7a7c328e8aa6a" name="ga1040719a13aee5e3eff7a7c328e8aa6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1040719a13aee5e3eff7a7c328e8aa6a">&#9670;&#160;</a></span>c4coll_nextDocExpiration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga4e9a8e237399a3869086cae270783476">C4Timestamp</a> c4coll_nextDocExpiration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the time at which the next document expiration in this collection should take place, or 0 if there are no documents with expiration times. </p>

</div>
</div>
<a id="gab95204b77adc8499c3a40403c8ac0343" name="gab95204b77adc8499c3a40403c8ac0343"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab95204b77adc8499c3a40403c8ac0343">&#9670;&#160;</a></span>c4coll_purgeDoc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4coll_purgeDoc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *&#160;</td>
          <td class="paramname"><em>collection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a>&#160;</td>
          <td class="paramname"><em>docID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes all trace of a document and its revisions from the collection. </p>

</div>
</div>
<a id="gae1ab203a01999be148c3a71500b4dccd" name="gae1ab203a01999be148c3a71500b4dccd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae1ab203a01999be148c3a71500b4dccd">&#9670;&#160;</a></span>c4coll_purgeExpiredDocs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> int64_t c4coll_purgeExpiredDocs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Purges all documents that have expired. </p>
<dl class="section return"><dt>Returns</dt><dd>The number of documents purged, or -1 on error. </dd></dl>

</div>
</div>
<a id="ga68d544be3cc8969718fe71b453b869bc" name="ga68d544be3cc8969718fe71b453b869bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga68d544be3cc8969718fe71b453b869bc">&#9670;&#160;</a></span>c4coll_putDoc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="struct_c4_document.html">C4Document</a> * c4coll_putDoc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *&#160;</td>
          <td class="paramname"><em>collection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_c4_doc_put_request.html">C4DocPutRequest</a> *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>outCommonAncestorIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A high-level Put operation, to insert a new or downloaded revision. </p>
<ul>
<li>If <code>request-&gt;existingRevision</code> is true, then request-&gt;history must contain the revision's history, with the revision's ID as the first item.</li>
<li>Otherwise, a new revision will be created and assigned a revID. The parent revision ID, if any, should be given as the single item of request-&gt;history. Either way, on success the document is returned with the inserted revision selected.</li>
</ul>
<p>Note that actually saving the document back to the database is optional &ndash; it only happens if request-&gt;save is true. You can set this to false if you want to review the changes before saving, e.g. to run them through a validation function. </p><dl class="section note"><dt>Note</dt><dd>You must call <a class="el" href="group___base.html#gab3de915958be3928c3a856ba4694a290">c4doc_release</a> when finished with the returned document. </dd></dl>

</div>
</div>
<a id="gaa644a91130945a5ebb7bbd70a30a305c" name="gaa644a91130945a5ebb7bbd70a30a305c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa644a91130945a5ebb7bbd70a30a305c">&#9670;&#160;</a></span>c4coll_setDocExpiration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4coll_setDocExpiration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> *&#160;</td>
          <td class="paramname"><em>collection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a>&#160;</td>
          <td class="paramname"><em>docID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga4e9a8e237399a3869086cae270783476">C4Timestamp</a>&#160;</td>
          <td class="paramname"><em>timestamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets an expiration date on a document. </p>
<p>After this time the document will be purged from the database. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">collection</td><td>The collection to set the expiration date in </td></tr>
    <tr><td class="paramname">docID</td><td>The ID of the document to set the expiration date for </td></tr>
    <tr><td class="paramname">timestamp</td><td>The timestamp of the expiration date, in milliseconds since 1/1/1970. A value of 0 indicates that the expiration should be cancelled. </td></tr>
    <tr><td class="paramname">outError</td><td>Information about any error that occurred </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on sucess, false on failure </dd></dl>

</div>
</div>
<a id="ga94001e9bc1a796c3cb5e6dc92e83b775" name="ga94001e9bc1a796c3cb5e6dc92e83b775"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga94001e9bc1a796c3cb5e6dc92e83b775">&#9670;&#160;</a></span>c4db_collectionNames()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group__types.html#ga384f95fe181d6050d5757ff85bb8bc82">FLMutableArray</a> c4db_collectionNames </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a>&#160;</td>
          <td class="paramname"><em>inScope</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the names of all existing collections in the given scope, in the order in which they were created. </p>
<dl class="section note"><dt>Note</dt><dd>You are responsible for releasing the returned Fleece array. </dd></dl>

</div>
</div>
<a id="ga1312f2efbae92939f3b2be4a7dd6d3df" name="ga1312f2efbae92939f3b2be4a7dd6d3df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1312f2efbae92939f3b2be4a7dd6d3df">&#9670;&#160;</a></span>c4db_createCollection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> * c4db_createCollection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_collection_spec.html">C4CollectionSpec</a>&#160;</td>
          <td class="paramname"><em>spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates and returns an empty collection with the given name &amp; scope. </p>
<p>If the collection already exists, it just returns it. If the scope doesn't exist, it is implicitly created. </p><dl class="section note"><dt>Note</dt><dd>Be sure to read <code>C4Collection</code> Lifespan in <a class="el" href="c4_collection_8h.html">c4Collection.h</a>. </dd></dl>

</div>
</div>
<a id="gac33bd525657791a91ac91ac664754bef" name="gac33bd525657791a91ac91ac664754bef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac33bd525657791a91ac91ac664754bef">&#9670;&#160;</a></span>c4db_deleteCollection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4db_deleteCollection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_collection_spec.html">C4CollectionSpec</a>&#160;</td>
          <td class="paramname"><em>spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes the collection with the given name &amp; scope. </p>
<p>Deleting the last collection from a scope implicitly deletes the scope. </p><dl class="section note"><dt>Note</dt><dd>It is legal to delete the default collection, but it cannot be re-created. </dd></dl>

</div>
</div>
<a id="gad7131cbd8d585aff702e999663ccf460" name="gad7131cbd8d585aff702e999663ccf460"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad7131cbd8d585aff702e999663ccf460">&#9670;&#160;</a></span>c4db_getCollection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> * c4db_getCollection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_collection_spec.html">C4CollectionSpec</a>&#160;</td>
          <td class="paramname"><em>spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the existing collection with the given name &amp; scope, or NULL if it doesn't exist. </p>
<dl class="section note"><dt>Note</dt><dd>Be sure to read <code>C4Collection</code> Lifespan in <a class="el" href="c4_collection_8h.html">c4Collection.h</a>. </dd></dl>

</div>
</div>
<a id="ga62bba40edc4ca9e549a7075f71fcbc6f" name="ga62bba40edc4ca9e549a7075f71fcbc6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga62bba40edc4ca9e549a7075f71fcbc6f">&#9670;&#160;</a></span>c4db_getDefaultCollection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#gad8be2ad2cef903785ae3f9736e14253b">C4Collection</a> * c4db_getDefaultCollection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the default collection, whose name is "`_default`" (<code>kC4DefaultCollectionName</code>). </p>
<p>This is the one collection that exists in every newly created database. When a pre-existing database is upgraded to support collections, all its documents are put in the default collection. </p><dl class="section note"><dt>Note</dt><dd>Be sure to read <code>C4Collection</code> Lifespan in <a class="el" href="c4_collection_8h.html">c4Collection.h</a>. </dd></dl>

</div>
</div>
<a id="ga443bc404135b96e305d926f13a0dec5a" name="ga443bc404135b96e305d926f13a0dec5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga443bc404135b96e305d926f13a0dec5a">&#9670;&#160;</a></span>c4db_hasCollection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4db_hasCollection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_collection_spec.html">C4CollectionSpec</a>&#160;</td>
          <td class="paramname"><em>spec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if the collection exists. </p>

</div>
</div>
<a id="ga6df288732b7bd7eb347070075e63efd0" name="ga6df288732b7bd7eb347070075e63efd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6df288732b7bd7eb347070075e63efd0">&#9670;&#160;</a></span>c4db_hasScope()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4db_hasScope </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a>&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if the named scope exists. </p>
<p>Note that _default will always return true. </p>

</div>
</div>
<a id="gabb387fb1dc8940baaa98362b9e7b6c56" name="gabb387fb1dc8940baaa98362b9e7b6c56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabb387fb1dc8940baaa98362b9e7b6c56">&#9670;&#160;</a></span>c4db_scopeNames()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group__types.html#ga384f95fe181d6050d5757ff85bb8bc82">FLMutableArray</a> c4db_scopeNames </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the names of all existing scopes, in the order in which they were created. </p>
<dl class="section note"><dt>Note</dt><dd>You are responsible for releasing the returned Fleece array. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
