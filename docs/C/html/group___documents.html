<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LiteCore: Documents</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LiteCore
   </div>
   <div id="projectbrief">Couchbase Lite cross-platform core implementation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="doc-content">
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a>  </div>
  <div class="headertitle"><div class="title">Documents</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_c4_revision.html">C4Revision</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Describes a revision of a document.  <a href="struct_c4_revision.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_c4_doc_put_request.html">C4DocPutRequest</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parameters for adding a revision using c4doc_put.  <a href="struct_c4_doc_put_request.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gade764c77842eee504a5fea7bbbed00e2" id="r_gade764c77842eee504a5fea7bbbed00e2"><td class="memItemLeft" align="right" valign="top">typedef uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gade764c77842eee504a5fea7bbbed00e2">C4RemoteID</a></td></tr>
<tr class="memdesc:gade764c77842eee504a5fea7bbbed00e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identifies a remote database being replicated with.  <br /></td></tr>
<tr class="separator:gade764c77842eee504a5fea7bbbed00e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga6e38f237f2913c80f264b66465c1e346" id="r_ga6e38f237f2913c80f264b66465c1e346"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6e38f237f2913c80f264b66465c1e346">C4DocumentFlags</a> : uint32_t { <a class="el" href="#gga6e38f237f2913c80f264b66465c1e346ab06de79ee7873cfedb9faac537b99517">kDocDeleted</a> = 0x01
, <a class="el" href="#gga6e38f237f2913c80f264b66465c1e346a104e7274d2bfe217a1af37731996c2fe">kDocConflicted</a> = 0x02
, <a class="el" href="#gga6e38f237f2913c80f264b66465c1e346ae318aac927315f08dc8976358b593892">kDocHasAttachments</a> = 0x04
, <a class="el" href="#gga6e38f237f2913c80f264b66465c1e346a4ba8b43606ed1719a44557f59a4c1861">kDocExists</a> = 0x1000
 }</td></tr>
<tr class="separator:ga6e38f237f2913c80f264b66465c1e346"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafc0b28ce70a5c3a9b8d968859e04b2c0" id="r_gafc0b28ce70a5c3a9b8d968859e04b2c0"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gafc0b28ce70a5c3a9b8d968859e04b2c0">C4RevisionFlags</a> : uint8_t { <br />
&#160;&#160;<a class="el" href="#ggafc0b28ce70a5c3a9b8d968859e04b2c0a95a06876278c3d89306dc03c0596d99f">kRevDeleted</a> = 0x01
, <a class="el" href="#ggafc0b28ce70a5c3a9b8d968859e04b2c0a05abdc876cf350785a1483e100bfba5a">kRevLeaf</a> = 0x02
, <a class="el" href="#ggafc0b28ce70a5c3a9b8d968859e04b2c0aff8958d43db22711a0c11d206a3f92c7">kRevNew</a> = 0x04
, <a class="el" href="#ggafc0b28ce70a5c3a9b8d968859e04b2c0a7d1cce9a519ad728770e0061924b8c80">kRevHasAttachments</a> = 0x08
, <br />
&#160;&#160;<a class="el" href="#ggafc0b28ce70a5c3a9b8d968859e04b2c0aa7b8a42208284f2cf1f356b0654d0ef3">kRevKeepBody</a> = 0x10
, <a class="el" href="#ggafc0b28ce70a5c3a9b8d968859e04b2c0a45137df136a24853a849abd5dbb5228c">kRevIsConflict</a> = 0x20
, <a class="el" href="#ggafc0b28ce70a5c3a9b8d968859e04b2c0a3b9ff88f5fd4564a7c46a4767329fb4b">kRevClosed</a> = 0x40
, <a class="el" href="#ggafc0b28ce70a5c3a9b8d968859e04b2c0a0075ec9ba8d221a649972d2dc442e549">kRevPurged</a> = 0x80
<br />
 }</td></tr>
<tr class="separator:gafc0b28ce70a5c3a9b8d968859e04b2c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadb2bbf97a307f0e83b226949404ad268" id="r_gadb2bbf97a307f0e83b226949404ad268"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gadb2bbf97a307f0e83b226949404ad268">C4DocContentLevel</a> : uint8_t { <a class="el" href="#ggadb2bbf97a307f0e83b226949404ad268aa193da04a392b6716e45f03da586a3a8">kDocGetMetadata</a>
, <a class="el" href="#ggadb2bbf97a307f0e83b226949404ad268a563fac3ef7d12fcd99f7dc14fb3594ad">kDocGetCurrentRev</a>
, <a class="el" href="#ggadb2bbf97a307f0e83b226949404ad268a55db2d58e4348e82d4e7c89edeb35182">kDocGetAll</a>
 }</td></tr>
<tr class="separator:gadb2bbf97a307f0e83b226949404ad268"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Creating and Updating Documents</h2></td></tr>
<tr class="memitem:gae5b532bf50eb06f7ddb7cfb592ac5c0d" id="r_gae5b532bf50eb06f7ddb7cfb592ac5c0d"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="group___base.html#ga7641ec7c9f4339b65cc4aabc050d67d8">C4SliceResult</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae5b532bf50eb06f7ddb7cfb592ac5c0d">C4DocDeltaApplier</a>) (void *context, <a class="el" href="struct_c4_document.html">C4Document</a> *doc, <a class="el" href="group___base.html#gac99d7d179bccd9bbaf29b28272975b47">C4Slice</a> delta, <a class="el" href="#gafc0b28ce70a5c3a9b8d968859e04b2c0">C4RevisionFlags</a> *revFlags, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:gae5b532bf50eb06f7ddb7cfb592ac5c0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Optional callback to <code>c4doc_put</code> that generates the new revision body, based on an earlier revision body and the body of the <code><a class="el" href="struct_c4_doc_put_request.html" title="Parameters for adding a revision using c4doc_put.">C4DocPutRequest</a></code>.  <br /></td></tr>
<tr class="separator:gae5b532bf50eb06f7ddb7cfb592ac5c0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Fleece-related</h2></td></tr>
<tr class="memitem:gae792c5cd06fe87cf7ec82768f5e8c710" id="r_gae792c5cd06fe87cf7ec82768f5e8c710"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group__types.html#ga20f7b17c87c48ffd2ff6d1cfeddd44e6">FLDict</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae792c5cd06fe87cf7ec82768f5e8c710">c4doc_getProperties</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *)</td></tr>
<tr class="memdesc:gae792c5cd06fe87cf7ec82768f5e8c710"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the properties of the selected revision, i.e.  <br /></td></tr>
<tr class="separator:gae792c5cd06fe87cf7ec82768f5e8c710"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaed18790755e91f56ff092aac155bcf38" id="r_gaed18790755e91f56ff092aac155bcf38"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group__types.html#ga6fcf80a526bde8519ac9e48db7746f14">FLDoc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaed18790755e91f56ff092aac155bcf38">c4doc_createFleeceDoc</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *)</td></tr>
<tr class="memdesc:gaed18790755e91f56ff092aac155bcf38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a Fleece document reference created from the selected revision.  <br /></td></tr>
<tr class="separator:gaed18790755e91f56ff092aac155bcf38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadb38efa64e171b72ed5c05cdda23a3db" id="r_gadb38efa64e171b72ed5c05cdda23a3db"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gadb38efa64e171b72ed5c05cdda23a3db">c4doc_resolveConflict2</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc, <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> winningRevID, <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> losingRevID, <a class="el" href="group__types.html#ga20f7b17c87c48ffd2ff6d1cfeddd44e6">FLDict</a> mergedProperties, <a class="el" href="#gafc0b28ce70a5c3a9b8d968859e04b2c0">C4RevisionFlags</a> mergedFlags, <a class="el" href="struct_c4_error.html">C4Error</a> *error)</td></tr>
<tr class="memdesc:gadb38efa64e171b72ed5c05cdda23a3db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resolves a conflict between two leaf revisions.  <br /></td></tr>
<tr class="separator:gadb38efa64e171b72ed5c05cdda23a3db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaebdad4cc072f16cec514ee959642a2e1" id="r_gaebdad4cc072f16cec514ee959642a2e1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="struct_c4_document.html">C4Document</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaebdad4cc072f16cec514ee959642a2e1">c4doc_containingValue</a> (<a class="el" href="group__types.html#gae0bde7a426f944395dbe59e3d52ba2c7">FLValue</a> value)</td></tr>
<tr class="memdesc:gaebdad4cc072f16cec514ee959642a2e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the <a class="el" href="struct_c4_document.html" title="Describes a version-controlled document.">C4Document</a>, if any, that contains the given Fleece value.  <br /></td></tr>
<tr class="separator:gaebdad4cc072f16cec514ee959642a2e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7eb5e317a270771d84ee61b0f340c06f" id="r_ga7eb5e317a270771d84ee61b0f340c06f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga7eb5e317a270771d84ee61b0f340c06f">c4doc_isOldMetaProperty</a> (<a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> prop)</td></tr>
<tr class="memdesc:ga7eb5e317a270771d84ee61b0f340c06f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if this is the name of a 1.x metadata property ("_id", "_rev", "_deleted".) Does NOT return true for "_attachments" because that property isn't obsolete.  <br /></td></tr>
<tr class="separator:ga7eb5e317a270771d84ee61b0f340c06f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9c535e9248ba04d10e00f7c2d0c34e89" id="r_ga9c535e9248ba04d10e00f7c2d0c34e89"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga9c535e9248ba04d10e00f7c2d0c34e89">c4doc_hasOldMetaProperties</a> (<a class="el" href="group__types.html#ga20f7b17c87c48ffd2ff6d1cfeddd44e6">FLDict</a> doc)</td></tr>
<tr class="memdesc:ga9c535e9248ba04d10e00f7c2d0c34e89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the document contains 1.x metadata properties at top level.  <br /></td></tr>
<tr class="separator:ga9c535e9248ba04d10e00f7c2d0c34e89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3b1d256fd64db8c7701874768fca3d8f" id="r_ga3b1d256fd64db8c7701874768fca3d8f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga7641ec7c9f4339b65cc4aabc050d67d8">C4SliceResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga3b1d256fd64db8c7701874768fca3d8f">c4doc_encodeStrippingOldMetaProperties</a> (<a class="el" href="group__types.html#ga20f7b17c87c48ffd2ff6d1cfeddd44e6">FLDict</a> doc, <a class="el" href="group__types.html#gabbd898ed871a7b340c817b6facba7568">FLSharedKeys</a> sk, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:ga3b1d256fd64db8c7701874768fca3d8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Re-encodes to Fleece, without any 1.x metadata properties.  <br /></td></tr>
<tr class="separator:ga3b1d256fd64db8c7701874768fca3d8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0510e3b791d066c9c43f1b87c9f419ff" id="r_ga0510e3b791d066c9c43f1b87c9f419ff"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga0510e3b791d066c9c43f1b87c9f419ff">c4doc_getDictBlobKey</a> (<a class="el" href="group__types.html#ga20f7b17c87c48ffd2ff6d1cfeddd44e6">FLDict</a> dict, <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a> *outKey)</td></tr>
<tr class="memdesc:ga0510e3b791d066c9c43f1b87c9f419ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decodes the dict's "digest" property to a <a class="el" href="struct_c4_blob_key.html" title="A unique identifier of a blob based on a SHA-1 digest of its contents.">C4BlobKey</a>.  <br /></td></tr>
<tr class="separator:ga0510e3b791d066c9c43f1b87c9f419ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga32fc1e7dedcbca89050b1614c815d307" id="r_ga32fc1e7dedcbca89050b1614c815d307"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga32fc1e7dedcbca89050b1614c815d307">c4doc_dictIsBlob</a> (<a class="el" href="group__types.html#ga20f7b17c87c48ffd2ff6d1cfeddd44e6">FLDict</a> dict, <a class="el" href="struct_c4_blob_key.html">C4BlobKey</a> *outKey)</td></tr>
<tr class="memdesc:ga32fc1e7dedcbca89050b1614c815d307"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the given dictionary is a [reference to a] blob; if so, gets its key.  <br /></td></tr>
<tr class="separator:ga32fc1e7dedcbca89050b1614c815d307"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga21ced8a87655403e400701abf239688e" id="r_ga21ced8a87655403e400701abf239688e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga21ced8a87655403e400701abf239688e">c4doc_dictContainsBlobs</a> (<a class="el" href="group__types.html#ga20f7b17c87c48ffd2ff6d1cfeddd44e6">FLDict</a> dict)</td></tr>
<tr class="memdesc:ga21ced8a87655403e400701abf239688e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the given dictionary is a [reference to a] blob;.  <br /></td></tr>
<tr class="separator:ga21ced8a87655403e400701abf239688e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga38913601f397426a981ad8db4559eaf6" id="r_ga38913601f397426a981ad8db4559eaf6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga7641ec7c9f4339b65cc4aabc050d67d8">C4SliceResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga38913601f397426a981ad8db4559eaf6">c4doc_getBlobData</a> (<a class="el" href="group__types.html#ga20f7b17c87c48ffd2ff6d1cfeddd44e6">FLDict</a> dict, <a class="el" href="group___base.html#ga3f2ced0e74afda9261b9337787129f57">C4BlobStore</a> *blobStore, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:ga38913601f397426a981ad8db4559eaf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the contents of a blob dictionary, whether they're inline in the "data" property, or indirectly referenced via the "digest" property.  <br /></td></tr>
<tr class="separator:ga38913601f397426a981ad8db4559eaf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9705ae71e5cd5f650430b0acf1f9540e" id="r_ga9705ae71e5cd5f650430b0acf1f9540e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga9705ae71e5cd5f650430b0acf1f9540e">c4doc_blobIsCompressible</a> (<a class="el" href="group__types.html#ga20f7b17c87c48ffd2ff6d1cfeddd44e6">FLDict</a> blobDict)</td></tr>
<tr class="memdesc:ga9705ae71e5cd5f650430b0acf1f9540e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a dictionary that's a reference to a blob, determines whether it's worth trying to compress the blob's data.  <br /></td></tr>
<tr class="separator:ga9705ae71e5cd5f650430b0acf1f9540e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa0ad27c1c95090e797b68f5cbd66c7c4" id="r_gaa0ad27c1c95090e797b68f5cbd66c7c4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga9621f4998e1f10a82cca421fede5588a">C4StringResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaa0ad27c1c95090e797b68f5cbd66c7c4">c4doc_bodyAsJSON</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc, bool canonical, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:gaa0ad27c1c95090e797b68f5cbd66c7c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Translates the body of the selected revision from Fleece to JSON.  <br /></td></tr>
<tr class="separator:gaa0ad27c1c95090e797b68f5cbd66c7c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6e0bfa1e6f4b82a04f4385bc87b73ba5" id="r_ga6e0bfa1e6f4b82a04f4385bc87b73ba5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group__types.html#ga8a91e0aaf4bd2987f0ded9fbcaf05fad">FLEncoder</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6e0bfa1e6f4b82a04f4385bc87b73ba5">c4db_createFleeceEncoder</a> (<a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *db)</td></tr>
<tr class="memdesc:ga6e0bfa1e6f4b82a04f4385bc87b73ba5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a Fleece encoder for creating documents for a given database.  <br /></td></tr>
<tr class="separator:ga6e0bfa1e6f4b82a04f4385bc87b73ba5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8ccf742bad38f72b07cd6d6be35ff92b" id="r_ga8ccf742bad38f72b07cd6d6be35ff92b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group__types.html#ga8a91e0aaf4bd2987f0ded9fbcaf05fad">FLEncoder</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga8ccf742bad38f72b07cd6d6be35ff92b">c4db_getSharedFleeceEncoder</a> (<a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *db)</td></tr>
<tr class="memdesc:ga8ccf742bad38f72b07cd6d6be35ff92b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a shared Fleece encoder for creating documents for a given database.  <br /></td></tr>
<tr class="separator:ga8ccf742bad38f72b07cd6d6be35ff92b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5d4453400f01a602ace8d6827b014077" id="r_ga5d4453400f01a602ace8d6827b014077"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga7641ec7c9f4339b65cc4aabc050d67d8">C4SliceResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga5d4453400f01a602ace8d6827b014077">c4db_encodeJSON</a> (<a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *, <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> jsonData, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:ga5d4453400f01a602ace8d6827b014077"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encodes JSON data to Fleece, to store into a document.  <br /></td></tr>
<tr class="separator:ga5d4453400f01a602ace8d6827b014077"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga41f1d203a7c4d7a1013930721f8ac75e" id="r_ga41f1d203a7c4d7a1013930721f8ac75e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group__types.html#gabbd898ed871a7b340c817b6facba7568">FLSharedKeys</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga41f1d203a7c4d7a1013930721f8ac75e">c4db_getFLSharedKeys</a> (<a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *db)</td></tr>
<tr class="memdesc:ga41f1d203a7c4d7a1013930721f8ac75e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the <a class="el" href="group__types.html#gabbd898ed871a7b340c817b6facba7568" title="A reference to a shared-keys mapping.">FLSharedKeys</a> object used by the given database.  <br /></td></tr>
<tr class="separator:ga41f1d203a7c4d7a1013930721f8ac75e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad4a66f7c443c04f3fea6202305103ba6" id="r_gad4a66f7c443c04f3fea6202305103ba6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gad4a66f7c443c04f3fea6202305103ba6">kC4ObjectTypeProperty</a>&#160;&#160;&#160;&quot;@type&quot;</td></tr>
<tr class="memdesc:gad4a66f7c443c04f3fea6202305103ba6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The sub-document property that identifies it as a special type of object.  <br /></td></tr>
<tr class="separator:gad4a66f7c443c04f3fea6202305103ba6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga54ca6aba487f620de76c3b1e6024ee41" id="r_ga54ca6aba487f620de76c3b1e6024ee41"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga54ca6aba487f620de76c3b1e6024ee41">kC4ObjectType_Blob</a>&#160;&#160;&#160;&quot;blob&quot;</td></tr>
<tr class="memdesc:ga54ca6aba487f620de76c3b1e6024ee41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Value of <code>kC4ObjectTypeProperty</code> that denotes a blob.  <br /></td></tr>
<tr class="separator:ga54ca6aba487f620de76c3b1e6024ee41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9c0d8326399033e467d0ce6a476df599" id="r_ga9c0d8326399033e467d0ce6a476df599"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga9c0d8326399033e467d0ce6a476df599">kC4BlobDigestProperty</a>&#160;&#160;&#160;&quot;digest&quot;</td></tr>
<tr class="memdesc:ga9c0d8326399033e467d0ce6a476df599"><td class="mdescLeft">&#160;</td><td class="mdescRight">Blob dict property containing a digest of the data.  <br /></td></tr>
<tr class="separator:ga9c0d8326399033e467d0ce6a476df599"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad7c45cade2ff2d8d194151d17ae40374" id="r_gad7c45cade2ff2d8d194151d17ae40374"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gad7c45cade2ff2d8d194151d17ae40374">kC4BlobDataProperty</a>&#160;&#160;&#160;&quot;data&quot;</td></tr>
<tr class="memdesc:gad7c45cade2ff2d8d194151d17ae40374"><td class="mdescLeft">&#160;</td><td class="mdescRight">Blob dict property containing the data itself.  <br /></td></tr>
<tr class="separator:gad7c45cade2ff2d8d194151d17ae40374"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafe0a97fcdeed2889a0dd3a9fc8ba310e" id="r_gafe0a97fcdeed2889a0dd3a9fc8ba310e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gafe0a97fcdeed2889a0dd3a9fc8ba310e">kC4LegacyAttachmentsProperty</a>&#160;&#160;&#160;&quot;_attachments&quot;</td></tr>
<tr class="memdesc:gafe0a97fcdeed2889a0dd3a9fc8ba310e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Top-level document property whose value is a CBL 1.x / CouchDB attachments container.  <br /></td></tr>
<tr class="separator:gafe0a97fcdeed2889a0dd3a9fc8ba310e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga03c1ab91a9bcfe465ca174c21d716da7" id="r_ga03c1ab91a9bcfe465ca174c21d716da7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga03c1ab91a9bcfe465ca174c21d716da7">kC4ObjectType_Encryptable</a>&#160;&#160;&#160;&quot;encryptable&quot;</td></tr>
<tr class="memdesc:ga03c1ab91a9bcfe465ca174c21d716da7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Value of <code>kC4ObjectTypeProperty</code> that denotes an encryptable value.  <br /></td></tr>
<tr class="separator:ga03c1ab91a9bcfe465ca174c21d716da7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga743e8dc45f6845c4d4ea275e22d0cfda" id="r_ga743e8dc45f6845c4d4ea275e22d0cfda"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga743e8dc45f6845c4d4ea275e22d0cfda">kC4EncryptableValueProperty</a>&#160;&#160;&#160;&quot;value&quot;</td></tr>
<tr class="memdesc:ga743e8dc45f6845c4d4ea275e22d0cfda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encryptable-value property containing the actual value; may be any type.  <br /></td></tr>
<tr class="separator:ga743e8dc45f6845c4d4ea275e22d0cfda"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Lifecycle</h2></td></tr>
<tr class="memitem:ga41c9aa9eefd07674d0f12289c977bbb7" id="r_ga41c9aa9eefd07674d0f12289c977bbb7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga41c9aa9eefd07674d0f12289c977bbb7">c4doc_generateID</a> (char *buffer, size_t bufferSize)</td></tr>
<tr class="memdesc:ga41c9aa9eefd07674d0f12289c977bbb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a random 23-byte C string suitable for use as a unique new document ID.  <br /></td></tr>
<tr class="separator:ga41c9aa9eefd07674d0f12289c977bbb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5e27475d7360c3d136b2849d1bbf7a90" id="r_ga5e27475d7360c3d136b2849d1bbf7a90"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga5e27475d7360c3d136b2849d1bbf7a90">c4doc_save</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc, uint32_t maxRevTreeDepth, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:ga5e27475d7360c3d136b2849d1bbf7a90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves changes to a <a class="el" href="struct_c4_document.html" title="Describes a version-controlled document.">C4Document</a>.  <br /></td></tr>
<tr class="separator:ga5e27475d7360c3d136b2849d1bbf7a90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4fbd4bcee1dfd5960f28fa5489ef6974" id="r_ga4fbd4bcee1dfd5960f28fa5489ef6974"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga4fbd4bcee1dfd5960f28fa5489ef6974">kC4GeneratedIDLength</a>&#160;&#160;&#160;23</td></tr>
<tr class="separator:ga4fbd4bcee1dfd5960f28fa5489ef6974"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Revisions</h2></td></tr>
<tr class="memitem:gab9ca40f6a43c77462aafbf719c6b1ad9" id="r_gab9ca40f6a43c77462aafbf719c6b1ad9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab9ca40f6a43c77462aafbf719c6b1ad9">c4doc_isRevRejected</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc)</td></tr>
<tr class="separator:gab9ca40f6a43c77462aafbf719c6b1ad9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafa3c09e649f3e1e62dd5f2939bd41d2c" id="r_gafa3c09e649f3e1e62dd5f2939bd41d2c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gafa3c09e649f3e1e62dd5f2939bd41d2c">c4doc_selectRevision</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc, <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> revID, bool withBody, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:gafa3c09e649f3e1e62dd5f2939bd41d2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Selects a specific revision of a document (or no revision, if revID is NULL.)  <br /></td></tr>
<tr class="separator:gafa3c09e649f3e1e62dd5f2939bd41d2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabfc224f2ca55fdbf70402c34129e4e38" id="r_gabfc224f2ca55fdbf70402c34129e4e38"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gabfc224f2ca55fdbf70402c34129e4e38">c4doc_selectCurrentRevision</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc)</td></tr>
<tr class="memdesc:gabfc224f2ca55fdbf70402c34129e4e38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Selects the current revision of a document.  <br /></td></tr>
<tr class="separator:gabfc224f2ca55fdbf70402c34129e4e38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga00f7a8973163fef718dddd6c918851cc" id="r_ga00f7a8973163fef718dddd6c918851cc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga00f7a8973163fef718dddd6c918851cc">c4doc_loadRevisionBody</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:ga00f7a8973163fef718dddd6c918851cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Populates the body field of a doc's selected revision, if it was initially loaded without its body.  <br /></td></tr>
<tr class="separator:ga00f7a8973163fef718dddd6c918851cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab1aae9c4158e514c2d9e60478aef483e" id="r_gab1aae9c4158e514c2d9e60478aef483e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab1aae9c4158e514c2d9e60478aef483e">c4doc_hasRevisionBody</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc)</td></tr>
<tr class="memdesc:gab1aae9c4158e514c2d9e60478aef483e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the body of the selected revision is available, i.e.  <br /></td></tr>
<tr class="separator:gab1aae9c4158e514c2d9e60478aef483e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac61bc9eeac45a6160ee38559db53b487" id="r_gac61bc9eeac45a6160ee38559db53b487"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#gac99d7d179bccd9bbaf29b28272975b47">C4Slice</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac61bc9eeac45a6160ee38559db53b487">c4doc_getRevisionBody</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc)</td></tr>
<tr class="memdesc:gac61bc9eeac45a6160ee38559db53b487"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the body (encoded Fleece data) of the selected revision, if available.  <br /></td></tr>
<tr class="separator:gac61bc9eeac45a6160ee38559db53b487"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeeb08e0e22270ddb18142ec9d1a8630c" id="r_gaeeb08e0e22270ddb18142ec9d1a8630c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga7641ec7c9f4339b65cc4aabc050d67d8">C4SliceResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaeeb08e0e22270ddb18142ec9d1a8630c">c4doc_getRevisionHistory</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc, unsigned maxRevs, const <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> backToRevs[], unsigned backToRevsCount)</td></tr>
<tr class="memdesc:gaeeb08e0e22270ddb18142ec9d1a8630c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a string encoding the selected revision's history, as comma-separate revision/version IDs in reverse chronological order.  <br /></td></tr>
<tr class="separator:gaeeb08e0e22270ddb18142ec9d1a8630c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga49444b198711b8f82f9032512af5beab" id="r_ga49444b198711b8f82f9032512af5beab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga7641ec7c9f4339b65cc4aabc050d67d8">C4SliceResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga49444b198711b8f82f9032512af5beab">c4doc_getSelectedRevIDGlobalForm</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc)</td></tr>
<tr class="memdesc:ga49444b198711b8f82f9032512af5beab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the selected revision's ID in a form that will make sense to another peer/server.  <br /></td></tr>
<tr class="separator:ga49444b198711b8f82f9032512af5beab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1405c06e813649514ca510fb1c60704e" id="r_ga1405c06e813649514ca510fb1c60704e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga1405c06e813649514ca510fb1c60704e">c4doc_selectParentRevision</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc)</td></tr>
<tr class="memdesc:ga1405c06e813649514ca510fb1c60704e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Selects the parent of the selected revision, if it's known, else returns false.  <br /></td></tr>
<tr class="separator:ga1405c06e813649514ca510fb1c60704e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga58caa1b30480a15f5bd821e434808dc0" id="r_ga58caa1b30480a15f5bd821e434808dc0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga58caa1b30480a15f5bd821e434808dc0">c4doc_selectNextRevision</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc)</td></tr>
<tr class="memdesc:ga58caa1b30480a15f5bd821e434808dc0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Selects the next revision in priority order.  <br /></td></tr>
<tr class="separator:ga58caa1b30480a15f5bd821e434808dc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga04c96c72d8114a88ac36787b0107995a" id="r_ga04c96c72d8114a88ac36787b0107995a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga04c96c72d8114a88ac36787b0107995a">c4doc_selectNextLeafRevision</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc, bool includeDeleted, bool withBody, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:ga04c96c72d8114a88ac36787b0107995a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Selects the next leaf revision; like selectNextRevision but skips over non-leaves.  <br /></td></tr>
<tr class="separator:ga04c96c72d8114a88ac36787b0107995a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabe0b8150422c09be9bc11f87e1166b1a" id="r_gabe0b8150422c09be9bc11f87e1166b1a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gabe0b8150422c09be9bc11f87e1166b1a">c4doc_selectCommonAncestorRevision</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc, <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> rev1ID, <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> rev2ID)</td></tr>
<tr class="memdesc:gabe0b8150422c09be9bc11f87e1166b1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Selects the common ancestor of two revisions.  <br /></td></tr>
<tr class="separator:gabe0b8150422c09be9bc11f87e1166b1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga584972c20acfcfb64c54cb8595cc1226" id="r_ga584972c20acfcfb64c54cb8595cc1226"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="#gade764c77842eee504a5fea7bbbed00e2">C4RemoteID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga584972c20acfcfb64c54cb8595cc1226">c4db_getRemoteDBID</a> (<a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *db, <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> remoteAddress, bool canCreate, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:ga584972c20acfcfb64c54cb8595cc1226"><td class="mdescLeft">&#160;</td><td class="mdescRight">Looks up or creates a numeric ID identifying a remote database, for use with <a class="el" href="#ga9315a62d8894ebed939c203d4fd7b222" title="Returns the revision ID that has been marked as current for the given remote database.">c4doc_getRemoteAncestor()</a> and <a class="el" href="#ga228ae7e8c04fcdddf6b9ce239d6bfc51" title="Marks a revision as current for the given remote database.">c4doc_setRemoteAncestor()</a>.  <br /></td></tr>
<tr class="separator:ga584972c20acfcfb64c54cb8595cc1226"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa382322ddcca85c30b79ba20e3a40f1f" id="r_gaa382322ddcca85c30b79ba20e3a40f1f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga7641ec7c9f4339b65cc4aabc050d67d8">C4SliceResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaa382322ddcca85c30b79ba20e3a40f1f">c4db_getRemoteDBAddress</a> (<a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *db, <a class="el" href="#gade764c77842eee504a5fea7bbbed00e2">C4RemoteID</a> remoteID)</td></tr>
<tr class="memdesc:gaa382322ddcca85c30b79ba20e3a40f1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a remote database ID, returns its replication URL / unique identifier.  <br /></td></tr>
<tr class="separator:gaa382322ddcca85c30b79ba20e3a40f1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9315a62d8894ebed939c203d4fd7b222" id="r_ga9315a62d8894ebed939c203d4fd7b222"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga7641ec7c9f4339b65cc4aabc050d67d8">C4SliceResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga9315a62d8894ebed939c203d4fd7b222">c4doc_getRemoteAncestor</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc, <a class="el" href="#gade764c77842eee504a5fea7bbbed00e2">C4RemoteID</a> remoteDatabase)</td></tr>
<tr class="memdesc:ga9315a62d8894ebed939c203d4fd7b222"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the revision ID that has been marked as current for the given remote database.  <br /></td></tr>
<tr class="separator:ga9315a62d8894ebed939c203d4fd7b222"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga228ae7e8c04fcdddf6b9ce239d6bfc51" id="r_ga228ae7e8c04fcdddf6b9ce239d6bfc51"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga228ae7e8c04fcdddf6b9ce239d6bfc51">c4doc_setRemoteAncestor</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc, <a class="el" href="#gade764c77842eee504a5fea7bbbed00e2">C4RemoteID</a> remoteDatabase, <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> revID, <a class="el" href="struct_c4_error.html">C4Error</a> *error)</td></tr>
<tr class="memdesc:ga228ae7e8c04fcdddf6b9ce239d6bfc51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks a revision as current for the given remote database.  <br /></td></tr>
<tr class="separator:ga228ae7e8c04fcdddf6b9ce239d6bfc51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga519b9b22df91f1946c16cc895a30acf8" id="r_ga519b9b22df91f1946c16cc895a30acf8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga519b9b22df91f1946c16cc895a30acf8">c4rev_getGeneration</a> (<a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> revID)</td></tr>
<tr class="memdesc:ga519b9b22df91f1946c16cc895a30acf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a tree-based revision ID, returns its generation number (the decimal number before the hyphen), or zero if it's unparseable.  <br /></td></tr>
<tr class="separator:ga519b9b22df91f1946c16cc895a30acf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaed62cbbc4b37f2d7cca6fc5775485905" id="r_gaed62cbbc4b37f2d7cca6fc5775485905"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaed62cbbc4b37f2d7cca6fc5775485905">c4rev_getTimestamp</a> (<a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> revID)</td></tr>
<tr class="memdesc:gaed62cbbc4b37f2d7cca6fc5775485905"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a revision ID that's a Version (of the form <code>time\@peer</code>), returns its timestamp.  <br /></td></tr>
<tr class="separator:gaed62cbbc4b37f2d7cca6fc5775485905"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga01457c44e69743ef3a5c6e0ee05b62ab" id="r_ga01457c44e69743ef3a5c6e0ee05b62ab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga7641ec7c9f4339b65cc4aabc050d67d8">C4SliceResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga01457c44e69743ef3a5c6e0ee05b62ab">c4rev_legacyAsVersion</a> (<a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> revID)</td></tr>
<tr class="memdesc:ga01457c44e69743ef3a5c6e0ee05b62ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a "legacy" tree-based revision ID, converts it to a synthetic version-based ID using the standard algorithm (generation and 40 bits of the digest are stuffed into the Version's timestamp, and the Version's sourceID is a well-known constant.)  <br /></td></tr>
<tr class="separator:ga01457c44e69743ef3a5c6e0ee05b62ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabee60916a457336a99afca17471139e9" id="r_gabee60916a457336a99afca17471139e9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gabee60916a457336a99afca17471139e9">c4rev_equal</a> (<a class="el" href="group___base.html#gac99d7d179bccd9bbaf29b28272975b47">C4Slice</a> rev1, <a class="el" href="group___base.html#gac99d7d179bccd9bbaf29b28272975b47">C4Slice</a> rev2)</td></tr>
<tr class="memdesc:gabee60916a457336a99afca17471139e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if two revision IDs are equivalent:  <br /></td></tr>
<tr class="separator:gabee60916a457336a99afca17471139e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga656d8bdc935171cc482a59b33d9b1d81" id="r_ga656d8bdc935171cc482a59b33d9b1d81"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga656d8bdc935171cc482a59b33d9b1d81">c4doc_purgeRevision</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc, <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> revID, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:ga656d8bdc935171cc482a59b33d9b1d81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a branch from a document's history.  <br /></td></tr>
<tr class="separator:ga656d8bdc935171cc482a59b33d9b1d81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac111b295d53083932f5a1e00d06f47fb" id="r_gac111b295d53083932f5a1e00d06f47fb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac111b295d53083932f5a1e00d06f47fb">c4doc_resolveConflict</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc, <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> winningRevID, <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a> losingRevID, <a class="el" href="group___base.html#gac99d7d179bccd9bbaf29b28272975b47">C4Slice</a> mergedBody, <a class="el" href="#gafc0b28ce70a5c3a9b8d968859e04b2c0">C4RevisionFlags</a> mergedFlags, <a class="el" href="struct_c4_error.html">C4Error</a> *error)</td></tr>
<tr class="memdesc:gac111b295d53083932f5a1e00d06f47fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resolves a conflict between two leaf revisions, by deleting one of them and optionally adding a new merged revision as a child of the other.  <br /></td></tr>
<tr class="separator:gac111b295d53083932f5a1e00d06f47fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Creating and Updating Documents</h2></td></tr>
<tr class="memitem:ga2fff70484029ee1f74064c0fd96a8539" id="r_ga2fff70484029ee1f74064c0fd96a8539"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="struct_c4_document.html">C4Document</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga2fff70484029ee1f74064c0fd96a8539">c4doc_update</a> (<a class="el" href="struct_c4_document.html">C4Document</a> *doc, <a class="el" href="group___base.html#gac99d7d179bccd9bbaf29b28272975b47">C4Slice</a> revisionBody, <a class="el" href="#gafc0b28ce70a5c3a9b8d968859e04b2c0">C4RevisionFlags</a> revisionFlags, <a class="el" href="struct_c4_error.html">C4Error</a> *error)</td></tr>
<tr class="memdesc:ga2fff70484029ee1f74064c0fd96a8539"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a revision to a document already in memory as a <a class="el" href="struct_c4_document.html" title="Describes a version-controlled document.">C4Document</a>.  <br /></td></tr>
<tr class="separator:ga2fff70484029ee1f74064c0fd96a8539"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gad7c45cade2ff2d8d194151d17ae40374" name="gad7c45cade2ff2d8d194151d17ae40374"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad7c45cade2ff2d8d194151d17ae40374">&#9670;&#160;</a></span>kC4BlobDataProperty</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define kC4BlobDataProperty&#160;&#160;&#160;&quot;data&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Blob dict property containing the data itself. </p>
<p>(Required if "digest" is absent) </p>

</div>
</div>
<a id="ga9c0d8326399033e467d0ce6a476df599" name="ga9c0d8326399033e467d0ce6a476df599"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9c0d8326399033e467d0ce6a476df599">&#9670;&#160;</a></span>kC4BlobDigestProperty</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define kC4BlobDigestProperty&#160;&#160;&#160;&quot;digest&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Blob dict property containing a digest of the data. </p>
<p>(Required if "data" is absent) </p>

</div>
</div>
<a id="ga743e8dc45f6845c4d4ea275e22d0cfda" name="ga743e8dc45f6845c4d4ea275e22d0cfda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga743e8dc45f6845c4d4ea275e22d0cfda">&#9670;&#160;</a></span>kC4EncryptableValueProperty</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define kC4EncryptableValueProperty&#160;&#160;&#160;&quot;value&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Encryptable-value property containing the actual value; may be any type. </p>
<p>(Required.) </p>

</div>
</div>
<a id="ga4fbd4bcee1dfd5960f28fa5489ef6974" name="ga4fbd4bcee1dfd5960f28fa5489ef6974"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4fbd4bcee1dfd5960f28fa5489ef6974">&#9670;&#160;</a></span>kC4GeneratedIDLength</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define kC4GeneratedIDLength&#160;&#160;&#160;23</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gafe0a97fcdeed2889a0dd3a9fc8ba310e" name="gafe0a97fcdeed2889a0dd3a9fc8ba310e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafe0a97fcdeed2889a0dd3a9fc8ba310e">&#9670;&#160;</a></span>kC4LegacyAttachmentsProperty</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define kC4LegacyAttachmentsProperty&#160;&#160;&#160;&quot;_attachments&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Top-level document property whose value is a CBL 1.x / CouchDB attachments container. </p>

</div>
</div>
<a id="ga54ca6aba487f620de76c3b1e6024ee41" name="ga54ca6aba487f620de76c3b1e6024ee41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga54ca6aba487f620de76c3b1e6024ee41">&#9670;&#160;</a></span>kC4ObjectType_Blob</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define kC4ObjectType_Blob&#160;&#160;&#160;&quot;blob&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Value of <code>kC4ObjectTypeProperty</code> that denotes a blob. </p>

</div>
</div>
<a id="ga03c1ab91a9bcfe465ca174c21d716da7" name="ga03c1ab91a9bcfe465ca174c21d716da7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga03c1ab91a9bcfe465ca174c21d716da7">&#9670;&#160;</a></span>kC4ObjectType_Encryptable</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define kC4ObjectType_Encryptable&#160;&#160;&#160;&quot;encryptable&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Value of <code>kC4ObjectTypeProperty</code> that denotes an encryptable value. </p>

</div>
</div>
<a id="gad4a66f7c443c04f3fea6202305103ba6" name="gad4a66f7c443c04f3fea6202305103ba6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad4a66f7c443c04f3fea6202305103ba6">&#9670;&#160;</a></span>kC4ObjectTypeProperty</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define kC4ObjectTypeProperty&#160;&#160;&#160;&quot;@type&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The sub-document property that identifies it as a special type of object. </p>
<p>For example, a blob is represented as <code>{"@type":"blob", "digest":"xxxx", ...}</code> </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gae5b532bf50eb06f7ddb7cfb592ac5c0d" name="gae5b532bf50eb06f7ddb7cfb592ac5c0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae5b532bf50eb06f7ddb7cfb592ac5c0d">&#9670;&#160;</a></span>C4DocDeltaApplier</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="group___base.html#ga7641ec7c9f4339b65cc4aabc050d67d8">C4SliceResult</a>(* C4DocDeltaApplier) (void *context, <a class="el" href="struct_c4_document.html">C4Document</a> *doc, <a class="el" href="group___base.html#gac99d7d179bccd9bbaf29b28272975b47">C4Slice</a> delta, <a class="el" href="#gafc0b28ce70a5c3a9b8d968859e04b2c0">C4RevisionFlags</a> *revFlags, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Optional callback to <code>c4doc_put</code> that generates the new revision body, based on an earlier revision body and the body of the <code><a class="el" href="struct_c4_doc_put_request.html" title="Parameters for adding a revision using c4doc_put.">C4DocPutRequest</a></code>. </p>
<p>It's intended for use when the new revision is specified as a delta. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>The same value given in the <code><a class="el" href="struct_c4_doc_put_request.html" title="Parameters for adding a revision using c4doc_put.">C4DocPutRequest</a></code>'s <code>deltaCBContext</code> field. </td></tr>
    <tr><td class="paramname">doc</td><td>The document; its selected revision is the one requested in the <code>deltaSourceRevID</code>. </td></tr>
    <tr><td class="paramname">delta</td><td>The contents of the request's <code>body</code> or <code>allocedBody</code>. </td></tr>
    <tr><td class="paramname">revFlags</td><td>If not nullptr, its value may be updated after the delta is applied. </td></tr>
    <tr><td class="paramname">outError</td><td>If the callback fails, store an error here if it's non-NULL. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The body to store in the new revision, or a null slice on failure. </dd></dl>

</div>
</div>
<a id="gade764c77842eee504a5fea7bbbed00e2" name="gade764c77842eee504a5fea7bbbed00e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gade764c77842eee504a5fea7bbbed00e2">&#9670;&#160;</a></span>C4RemoteID</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint32_t <a class="el" href="#gade764c77842eee504a5fea7bbbed00e2">C4RemoteID</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identifies a remote database being replicated with. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gadb2bbf97a307f0e83b226949404ad268" name="gadb2bbf97a307f0e83b226949404ad268"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadb2bbf97a307f0e83b226949404ad268">&#9670;&#160;</a></span>C4DocContentLevel</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#gadb2bbf97a307f0e83b226949404ad268">C4DocContentLevel</a> : uint8_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggadb2bbf97a307f0e83b226949404ad268aa193da04a392b6716e45f03da586a3a8" name="ggadb2bbf97a307f0e83b226949404ad268aa193da04a392b6716e45f03da586a3a8"></a>kDocGetMetadata&#160;</td><td class="fielddoc"><p>Only get revID and flags. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggadb2bbf97a307f0e83b226949404ad268a563fac3ef7d12fcd99f7dc14fb3594ad" name="ggadb2bbf97a307f0e83b226949404ad268a563fac3ef7d12fcd99f7dc14fb3594ad"></a>kDocGetCurrentRev&#160;</td><td class="fielddoc"><p>Get current revision body but not other revisions/remotes. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggadb2bbf97a307f0e83b226949404ad268a55db2d58e4348e82d4e7c89edeb35182" name="ggadb2bbf97a307f0e83b226949404ad268a55db2d58e4348e82d4e7c89edeb35182"></a>kDocGetAll&#160;</td><td class="fielddoc"><p>Get everything. </p>
</td></tr>
</table>

</div>
</div>
<a id="ga6e38f237f2913c80f264b66465c1e346" name="ga6e38f237f2913c80f264b66465c1e346"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6e38f237f2913c80f264b66465c1e346">&#9670;&#160;</a></span>C4DocumentFlags</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#ga6e38f237f2913c80f264b66465c1e346">C4DocumentFlags</a> : uint32_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga6e38f237f2913c80f264b66465c1e346ab06de79ee7873cfedb9faac537b99517" name="gga6e38f237f2913c80f264b66465c1e346ab06de79ee7873cfedb9faac537b99517"></a>kDocDeleted&#160;</td><td class="fielddoc"><p>The document's current revision is deleted. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga6e38f237f2913c80f264b66465c1e346a104e7274d2bfe217a1af37731996c2fe" name="gga6e38f237f2913c80f264b66465c1e346a104e7274d2bfe217a1af37731996c2fe"></a>kDocConflicted&#160;</td><td class="fielddoc"><p>The document is in conflict. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga6e38f237f2913c80f264b66465c1e346ae318aac927315f08dc8976358b593892" name="gga6e38f237f2913c80f264b66465c1e346ae318aac927315f08dc8976358b593892"></a>kDocHasAttachments&#160;</td><td class="fielddoc"><p>The document's current revision has attachments. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga6e38f237f2913c80f264b66465c1e346a4ba8b43606ed1719a44557f59a4c1861" name="gga6e38f237f2913c80f264b66465c1e346a4ba8b43606ed1719a44557f59a4c1861"></a>kDocExists&#160;</td><td class="fielddoc"><p>The document exists (i.e. has revisions.) </p>
</td></tr>
</table>

</div>
</div>
<a id="gafc0b28ce70a5c3a9b8d968859e04b2c0" name="gafc0b28ce70a5c3a9b8d968859e04b2c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafc0b28ce70a5c3a9b8d968859e04b2c0">&#9670;&#160;</a></span>C4RevisionFlags</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#gafc0b28ce70a5c3a9b8d968859e04b2c0">C4RevisionFlags</a> : uint8_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggafc0b28ce70a5c3a9b8d968859e04b2c0a95a06876278c3d89306dc03c0596d99f" name="ggafc0b28ce70a5c3a9b8d968859e04b2c0a95a06876278c3d89306dc03c0596d99f"></a>kRevDeleted&#160;</td><td class="fielddoc"><p>Is this revision a deletion/tombstone? </p>
</td></tr>
<tr><td class="fieldname"><a id="ggafc0b28ce70a5c3a9b8d968859e04b2c0a05abdc876cf350785a1483e100bfba5a" name="ggafc0b28ce70a5c3a9b8d968859e04b2c0a05abdc876cf350785a1483e100bfba5a"></a>kRevLeaf&#160;</td><td class="fielddoc"><p>Is this revision a leaf (no children?) </p>
</td></tr>
<tr><td class="fieldname"><a id="ggafc0b28ce70a5c3a9b8d968859e04b2c0aff8958d43db22711a0c11d206a3f92c7" name="ggafc0b28ce70a5c3a9b8d968859e04b2c0aff8958d43db22711a0c11d206a3f92c7"></a>kRevNew&#160;</td><td class="fielddoc"><p>Has this rev been inserted since the doc was read? </p>
</td></tr>
<tr><td class="fieldname"><a id="ggafc0b28ce70a5c3a9b8d968859e04b2c0a7d1cce9a519ad728770e0061924b8c80" name="ggafc0b28ce70a5c3a9b8d968859e04b2c0a7d1cce9a519ad728770e0061924b8c80"></a>kRevHasAttachments&#160;</td><td class="fielddoc"><p>Does this rev's body contain attachments? </p>
</td></tr>
<tr><td class="fieldname"><a id="ggafc0b28ce70a5c3a9b8d968859e04b2c0aa7b8a42208284f2cf1f356b0654d0ef3" name="ggafc0b28ce70a5c3a9b8d968859e04b2c0aa7b8a42208284f2cf1f356b0654d0ef3"></a>kRevKeepBody&#160;</td><td class="fielddoc"><p>Revision's body should not be discarded when non-leaf. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggafc0b28ce70a5c3a9b8d968859e04b2c0a45137df136a24853a849abd5dbb5228c" name="ggafc0b28ce70a5c3a9b8d968859e04b2c0a45137df136a24853a849abd5dbb5228c"></a>kRevIsConflict&#160;</td><td class="fielddoc"><p>Unresolved conflicting revision; will never be current. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggafc0b28ce70a5c3a9b8d968859e04b2c0a3b9ff88f5fd4564a7c46a4767329fb4b" name="ggafc0b28ce70a5c3a9b8d968859e04b2c0a3b9ff88f5fd4564a7c46a4767329fb4b"></a>kRevClosed&#160;</td><td class="fielddoc"><p>Rev is the (deleted) end of a closed conflicting branch. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggafc0b28ce70a5c3a9b8d968859e04b2c0a0075ec9ba8d221a649972d2dc442e549" name="ggafc0b28ce70a5c3a9b8d968859e04b2c0a0075ec9ba8d221a649972d2dc442e549"></a>kRevPurged&#160;</td><td class="fielddoc"><p>Revision is purged (this flag is never stored in the db) </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga6e0bfa1e6f4b82a04f4385bc87b73ba5" name="ga6e0bfa1e6f4b82a04f4385bc87b73ba5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6e0bfa1e6f4b82a04f4385bc87b73ba5">&#9670;&#160;</a></span>c4db_createFleeceEncoder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group__types.html#ga8a91e0aaf4bd2987f0ded9fbcaf05fad">FLEncoder</a> c4db_createFleeceEncoder </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *</td>          <td class="paramname"><span class="paramname"><em>db</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a Fleece encoder for creating documents for a given database. </p>
<dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Database when this function is called. </dd></dl>

</div>
</div>
<a id="ga5d4453400f01a602ace8d6827b014077" name="ga5d4453400f01a602ace8d6827b014077"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5d4453400f01a602ace8d6827b014077">&#9670;&#160;</a></span>c4db_encodeJSON()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga7641ec7c9f4339b65cc4aabc050d67d8">C4SliceResult</a> c4db_encodeJSON </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a></td>          <td class="paramname"><span class="paramname"><em>jsonData</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em>outError</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Encodes JSON data to Fleece, to store into a document. </p>
<dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Database when this function is called. </dd></dl>

</div>
</div>
<a id="ga41f1d203a7c4d7a1013930721f8ac75e" name="ga41f1d203a7c4d7a1013930721f8ac75e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga41f1d203a7c4d7a1013930721f8ac75e">&#9670;&#160;</a></span>c4db_getFLSharedKeys()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group__types.html#gabbd898ed871a7b340c817b6facba7568">FLSharedKeys</a> c4db_getFLSharedKeys </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *</td>          <td class="paramname"><span class="paramname"><em>db</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the <a class="el" href="group__types.html#gabbd898ed871a7b340c817b6facba7568" title="A reference to a shared-keys mapping.">FLSharedKeys</a> object used by the given database. </p>
<dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Database when this function is called. </dd></dl>

</div>
</div>
<a id="gaa382322ddcca85c30b79ba20e3a40f1f" name="gaa382322ddcca85c30b79ba20e3a40f1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa382322ddcca85c30b79ba20e3a40f1f">&#9670;&#160;</a></span>c4db_getRemoteDBAddress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga7641ec7c9f4339b65cc4aabc050d67d8">C4SliceResult</a> c4db_getRemoteDBAddress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *</td>          <td class="paramname"><span class="paramname"><em>db</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#gade764c77842eee504a5fea7bbbed00e2">C4RemoteID</a></td>          <td class="paramname"><span class="paramname"><em>remoteID</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a remote database ID, returns its replication URL / unique identifier. </p>
<dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Database when this function is called. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>The database. </td></tr>
    <tr><td class="paramname">remoteID</td><td>The ID assigned to the remote database. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The URL/identifier, or a null slice if not found. </dd></dl>

</div>
</div>
<a id="ga584972c20acfcfb64c54cb8595cc1226" name="ga584972c20acfcfb64c54cb8595cc1226"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga584972c20acfcfb64c54cb8595cc1226">&#9670;&#160;</a></span>c4db_getRemoteDBID()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="#gade764c77842eee504a5fea7bbbed00e2">C4RemoteID</a> c4db_getRemoteDBID </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *</td>          <td class="paramname"><span class="paramname"><em>db</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a></td>          <td class="paramname"><span class="paramname"><em>remoteAddress</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>canCreate</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em>outError</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Looks up or creates a numeric ID identifying a remote database, for use with <a class="el" href="#ga9315a62d8894ebed939c203d4fd7b222" title="Returns the revision ID that has been marked as current for the given remote database.">c4doc_getRemoteAncestor()</a> and <a class="el" href="#ga228ae7e8c04fcdddf6b9ce239d6bfc51" title="Marks a revision as current for the given remote database.">c4doc_setRemoteAncestor()</a>. </p>
<dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Database when this function is called. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>The database. </td></tr>
    <tr><td class="paramname">remoteAddress</td><td>The replication URL of the remote db, or its other unique identifier. </td></tr>
    <tr><td class="paramname">canCreate</td><td>If true, a new identifier will be created if one doesn't exist. </td></tr>
    <tr><td class="paramname">outError</td><td>Error information is stored here. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The ID, or 0 on error. </dd></dl>

</div>
</div>
<a id="ga8ccf742bad38f72b07cd6d6be35ff92b" name="ga8ccf742bad38f72b07cd6d6be35ff92b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8ccf742bad38f72b07cd6d6be35ff92b">&#9670;&#160;</a></span>c4db_getSharedFleeceEncoder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group__types.html#ga8a91e0aaf4bd2987f0ded9fbcaf05fad">FLEncoder</a> c4db_getSharedFleeceEncoder </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gae046b9267a473fdc31471b022fc94676">C4Database</a> *</td>          <td class="paramname"><span class="paramname"><em>db</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a shared Fleece encoder for creating documents for a given database. </p>
<p>DO NOT FREE THIS ENCODER. Instead, call <a class="el" href="group___f_l_encoder.html#ga9d1d5b8cf6505c3e382d2737ade6180c" title="Resets the state of an encoder without freeing it.">FLEncoder_Reset()</a> when finished. </p><dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Database when this function is called. </dd></dl>

</div>
</div>
<a id="ga9705ae71e5cd5f650430b0acf1f9540e" name="ga9705ae71e5cd5f650430b0acf1f9540e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9705ae71e5cd5f650430b0acf1f9540e">&#9670;&#160;</a></span>c4doc_blobIsCompressible()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4doc_blobIsCompressible </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__types.html#ga20f7b17c87c48ffd2ff6d1cfeddd44e6">FLDict</a></td>          <td class="paramname"><span class="paramname"><em>blobDict</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a dictionary that's a reference to a blob, determines whether it's worth trying to compress the blob's data. </p>
<p>This is done by examining the "encoding" and "content_type" properties and using heuristics to detect types that are already compressed, like gzip or JPEG. If no warning flags are found it will return true. </p><dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Database when this function is called. </dd>
<dd>
Assume <code>blobDict</code> is obtained from the database. </dd></dl>

</div>
</div>
<a id="gaa0ad27c1c95090e797b68f5cbd66c7c4" name="gaa0ad27c1c95090e797b68f5cbd66c7c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa0ad27c1c95090e797b68f5cbd66c7c4">&#9670;&#160;</a></span>c4doc_bodyAsJSON()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga9621f4998e1f10a82cca421fede5588a">C4StringResult</a> c4doc_bodyAsJSON </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *</td>          <td class="paramname"><span class="paramname"><em>doc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>canonical</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em>outError</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Translates the body of the selected revision from Fleece to JSON. </p>
<dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Database when this function is called. </dd></dl>

</div>
</div>
<a id="gaebdad4cc072f16cec514ee959642a2e1" name="gaebdad4cc072f16cec514ee959642a2e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaebdad4cc072f16cec514ee959642a2e1">&#9670;&#160;</a></span>c4doc_containingValue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="struct_c4_document.html">C4Document</a> * c4doc_containingValue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__types.html#gae0bde7a426f944395dbe59e3d52ba2c7">FLValue</a></td>          <td class="paramname"><span class="paramname"><em>value</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the <a class="el" href="struct_c4_document.html" title="Describes a version-controlled document.">C4Document</a>, if any, that contains the given Fleece value. </p>

</div>
</div>
<a id="gaed18790755e91f56ff092aac155bcf38" name="gaed18790755e91f56ff092aac155bcf38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaed18790755e91f56ff092aac155bcf38">&#9670;&#160;</a></span>c4doc_createFleeceDoc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group__types.html#ga6fcf80a526bde8519ac9e48db7746f14">FLDoc</a> c4doc_createFleeceDoc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a Fleece document reference created from the selected revision. </p>
<p>Caller must release the reference! </p><dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Database when this function is called. </dd></dl>

</div>
</div>
<a id="ga21ced8a87655403e400701abf239688e" name="ga21ced8a87655403e400701abf239688e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga21ced8a87655403e400701abf239688e">&#9670;&#160;</a></span>c4doc_dictContainsBlobs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4doc_dictContainsBlobs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__types.html#ga20f7b17c87c48ffd2ff6d1cfeddd44e6">FLDict</a></td>          <td class="paramname"><span class="paramname"><em>dict</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if the given dictionary is a [reference to a] blob;. </p>
<dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Database when this function is called. </dd>
<dd>
Assume <code>dict</code> is obtained from the database. </dd></dl>

</div>
</div>
<a id="ga32fc1e7dedcbca89050b1614c815d307" name="ga32fc1e7dedcbca89050b1614c815d307"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga32fc1e7dedcbca89050b1614c815d307">&#9670;&#160;</a></span>c4doc_dictIsBlob()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4doc_dictIsBlob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__types.html#ga20f7b17c87c48ffd2ff6d1cfeddd44e6">FLDict</a></td>          <td class="paramname"><span class="paramname"><em>dict</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_blob_key.html">C4BlobKey</a> *</td>          <td class="paramname"><span class="paramname"><em>outKey</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if the given dictionary is a [reference to a] blob; if so, gets its key. </p>
<p>(This function cannot recognize child dictionaries of "_attachments", because it's not possible to look at the parent of a Fleece value.) </p><dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Database when this function is called. </dd>
<dd>
Assume <code>dict</code> is obtained from the database. </dd></dl>

</div>
</div>
<a id="ga3b1d256fd64db8c7701874768fca3d8f" name="ga3b1d256fd64db8c7701874768fca3d8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3b1d256fd64db8c7701874768fca3d8f">&#9670;&#160;</a></span>c4doc_encodeStrippingOldMetaProperties()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga7641ec7c9f4339b65cc4aabc050d67d8">C4SliceResult</a> c4doc_encodeStrippingOldMetaProperties </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__types.html#ga20f7b17c87c48ffd2ff6d1cfeddd44e6">FLDict</a></td>          <td class="paramname"><span class="paramname"><em>doc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__types.html#gabbd898ed871a7b340c817b6facba7568">FLSharedKeys</a></td>          <td class="paramname"><span class="paramname"><em>sk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em>outError</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Re-encodes to Fleece, without any 1.x metadata properties. </p>
<p>Old-style attachments that <em>don't</em> refer to blobs will be removed; others are kept. </p><dl class="section note"><dt>Note</dt><dd>This function is thread-safe. </dd></dl>

</div>
</div>
<a id="ga41c9aa9eefd07674d0f12289c977bbb7" name="ga41c9aa9eefd07674d0f12289c977bbb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga41c9aa9eefd07674d0f12289c977bbb7">&#9670;&#160;</a></span>c4doc_generateID()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> char * c4doc_generateID </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>buffer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>bufferSize</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates a random 23-byte C string suitable for use as a unique new document ID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Where to write the string. </td></tr>
    <tr><td class="paramname">bufferSize</td><td>Size of the buffer (must be at least kC4GeneratedIDLength + 1) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the string in the buffer, or NULL if the buffer is too small. </dd></dl>

</div>
</div>
<a id="ga38913601f397426a981ad8db4559eaf6" name="ga38913601f397426a981ad8db4559eaf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga38913601f397426a981ad8db4559eaf6">&#9670;&#160;</a></span>c4doc_getBlobData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga7641ec7c9f4339b65cc4aabc050d67d8">C4SliceResult</a> c4doc_getBlobData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__types.html#ga20f7b17c87c48ffd2ff6d1cfeddd44e6">FLDict</a></td>          <td class="paramname"><span class="paramname"><em>dict</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga3f2ced0e74afda9261b9337787129f57">C4BlobStore</a> *</td>          <td class="paramname"><span class="paramname"><em>blobStore</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em>outError</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the contents of a blob dictionary, whether they're inline in the "data" property, or indirectly referenced via the "digest" property. </p>
<dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Database when this function is called. </dd>
<dd>
Assume <code>dict</code> is obtained from the database. </dd>
<dd>
You can omit the <a class="el" href="group___base.html#ga3f2ced0e74afda9261b9337787129f57" title="Opaque handle for an object that manages storage of blobs.">C4BlobStore</a>, but if the blob has no inline data the function will give up and return a null slice (and clear the error, since this isn't a failure.) </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dict</td><td>A blob dictionary. </td></tr>
    <tr><td class="paramname">blobStore</td><td>The database's BlobStore, or NULL to suppress loading blobs from disk. </td></tr>
    <tr><td class="paramname">outError</td><td>On failure, the error will be written here. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The blob data, or null on failure. </dd></dl>

</div>
</div>
<a id="ga0510e3b791d066c9c43f1b87c9f419ff" name="ga0510e3b791d066c9c43f1b87c9f419ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0510e3b791d066c9c43f1b87c9f419ff">&#9670;&#160;</a></span>c4doc_getDictBlobKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4doc_getDictBlobKey </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__types.html#ga20f7b17c87c48ffd2ff6d1cfeddd44e6">FLDict</a></td>          <td class="paramname"><span class="paramname"><em>dict</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_blob_key.html">C4BlobKey</a> *</td>          <td class="paramname"><span class="paramname"><em>outKey</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decodes the dict's "digest" property to a <a class="el" href="struct_c4_blob_key.html" title="A unique identifier of a blob based on a SHA-1 digest of its contents.">C4BlobKey</a>. </p>
<p>Returns false if there is no such property or it's not a valid blob key. </p><dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Database when this function is called. </dd>
<dd>
Assume <code>dict</code> is obtained from the database. </dd></dl>

</div>
</div>
<a id="gae792c5cd06fe87cf7ec82768f5e8c710" name="gae792c5cd06fe87cf7ec82768f5e8c710"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae792c5cd06fe87cf7ec82768f5e8c710">&#9670;&#160;</a></span>c4doc_getProperties()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group__types.html#ga20f7b17c87c48ffd2ff6d1cfeddd44e6">FLDict</a> c4doc_getProperties </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the properties of the selected revision, i.e. </p>
<p>the root Fleece Dict. </p><dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Database when this function is called. </dd></dl>

</div>
</div>
<a id="ga9315a62d8894ebed939c203d4fd7b222" name="ga9315a62d8894ebed939c203d4fd7b222"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9315a62d8894ebed939c203d4fd7b222">&#9670;&#160;</a></span>c4doc_getRemoteAncestor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga7641ec7c9f4339b65cc4aabc050d67d8">C4SliceResult</a> c4doc_getRemoteAncestor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *</td>          <td class="paramname"><span class="paramname"><em>doc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#gade764c77842eee504a5fea7bbbed00e2">C4RemoteID</a></td>          <td class="paramname"><span class="paramname"><em>remoteDatabase</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the revision ID that has been marked as current for the given remote database. </p>
<dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Database and Document when this function is called. </dd></dl>

</div>
</div>
<a id="gac61bc9eeac45a6160ee38559db53b487" name="gac61bc9eeac45a6160ee38559db53b487"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac61bc9eeac45a6160ee38559db53b487">&#9670;&#160;</a></span>c4doc_getRevisionBody()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#gac99d7d179bccd9bbaf29b28272975b47">C4Slice</a> c4doc_getRevisionBody </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *</td>          <td class="paramname"><span class="paramname"><em>doc</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the body (encoded Fleece data) of the selected revision, if available. </p>
<dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Document when this function is called. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>In a version-vector document, and if this is not the current revision, the returned slice is invalidated the next time this function is called. </dd></dl>

</div>
</div>
<a id="gaeeb08e0e22270ddb18142ec9d1a8630c" name="gaeeb08e0e22270ddb18142ec9d1a8630c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaeeb08e0e22270ddb18142ec9d1a8630c">&#9670;&#160;</a></span>c4doc_getRevisionHistory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga7641ec7c9f4339b65cc4aabc050d67d8">C4SliceResult</a> c4doc_getRevisionHistory </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *</td>          <td class="paramname"><span class="paramname"><em>doc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned</td>          <td class="paramname"><span class="paramname"><em>maxRevs</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a></td>          <td class="paramname"><span class="paramname"><em>backToRevs</em></span>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned</td>          <td class="paramname"><span class="paramname"><em>backToRevsCount</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a string encoding the selected revision's history, as comma-separate revision/version IDs in reverse chronological order. </p>
<p>In a version-vector database this is of course the revision's version vector. It will be in global form (real SourceID instead of "*") unless the <code>maxRevs</code> parameter is 0. </p><dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Document when this function is called. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">doc</td><td>The document. </td></tr>
    <tr><td class="paramname">maxRevs</td><td>The maximum number of revisions to include in the result; or 0 for unlimited. </td></tr>
    <tr><td class="paramname">backToRevs</td><td>An array of revision IDs: the history should stop when it gets to any of these, and <em>must</em> go back to one of these if possible, even if it means skipping some revisions. </td></tr>
    <tr><td class="paramname">backToRevsCount</td><td>The number of revisions in the <code>backToRevs</code> array. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A string of comma-separate revision/version IDs in reverse chronological order. </dd></dl>

</div>
</div>
<a id="ga49444b198711b8f82f9032512af5beab" name="ga49444b198711b8f82f9032512af5beab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga49444b198711b8f82f9032512af5beab">&#9670;&#160;</a></span>c4doc_getSelectedRevIDGlobalForm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga7641ec7c9f4339b65cc4aabc050d67d8">C4SliceResult</a> c4doc_getSelectedRevIDGlobalForm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *</td>          <td class="paramname"><span class="paramname"><em>doc</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the selected revision's ID in a form that will make sense to another peer/server. </p>
<p>(This doesn't affect tree-based revIDs. In vector-based version IDs it uses the database's actual peer ID instead of the shorthand "*" character.) </p><dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Document when this function is called. </dd></dl>

</div>
</div>
<a id="ga9c535e9248ba04d10e00f7c2d0c34e89" name="ga9c535e9248ba04d10e00f7c2d0c34e89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9c535e9248ba04d10e00f7c2d0c34e89">&#9670;&#160;</a></span>c4doc_hasOldMetaProperties()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4doc_hasOldMetaProperties </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__types.html#ga20f7b17c87c48ffd2ff6d1cfeddd44e6">FLDict</a></td>          <td class="paramname"><span class="paramname"><em>doc</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if the document contains 1.x metadata properties at top level. </p>
<p>Does NOT return true for "_attachments" because that property isn't obsolete. </p><dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Database when this function is called. </dd>
<dd>
Assume <code>doc</code> is obtained from the database. </dd></dl>

</div>
</div>
<a id="gab1aae9c4158e514c2d9e60478aef483e" name="gab1aae9c4158e514c2d9e60478aef483e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab1aae9c4158e514c2d9e60478aef483e">&#9670;&#160;</a></span>c4doc_hasRevisionBody()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4doc_hasRevisionBody </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *</td>          <td class="paramname"><span class="paramname"><em>doc</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if the body of the selected revision is available, i.e. </p>
<p>if <a class="el" href="#ga00f7a8973163fef718dddd6c918851cc" title="Populates the body field of a doc&#39;s selected revision, if it was initially loaded without its body.">c4doc_loadRevisionBody()</a> would succeed. </p><dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Document when this function is called. </dd></dl>

</div>
</div>
<a id="ga7eb5e317a270771d84ee61b0f340c06f" name="ga7eb5e317a270771d84ee61b0f340c06f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7eb5e317a270771d84ee61b0f340c06f">&#9670;&#160;</a></span>c4doc_isOldMetaProperty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4doc_isOldMetaProperty </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a></td>          <td class="paramname"><span class="paramname"><em>prop</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if this is the name of a 1.x metadata property ("_id", "_rev", "_deleted".) Does NOT return true for "_attachments" because that property isn't obsolete. </p>

</div>
</div>
<a id="gab9ca40f6a43c77462aafbf719c6b1ad9" name="gab9ca40f6a43c77462aafbf719c6b1ad9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab9ca40f6a43c77462aafbf719c6b1ad9">&#9670;&#160;</a></span>c4doc_isRevRejected()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4doc_isRevRejected </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *</td>          <td class="paramname"><span class="paramname"><em>doc</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga00f7a8973163fef718dddd6c918851cc" name="ga00f7a8973163fef718dddd6c918851cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga00f7a8973163fef718dddd6c918851cc">&#9670;&#160;</a></span>c4doc_loadRevisionBody()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4doc_loadRevisionBody </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *</td>          <td class="paramname"><span class="paramname"><em>doc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em>outError</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Populates the body field of a doc's selected revision, if it was initially loaded without its body. </p>
<dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Document when this function is called. </dd></dl>

</div>
</div>
<a id="ga656d8bdc935171cc482a59b33d9b1d81" name="ga656d8bdc935171cc482a59b33d9b1d81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga656d8bdc935171cc482a59b33d9b1d81">&#9670;&#160;</a></span>c4doc_purgeRevision()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> int32_t c4doc_purgeRevision </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *</td>          <td class="paramname"><span class="paramname"><em>doc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a></td>          <td class="paramname"><span class="paramname"><em>revID</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em>outError</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes a branch from a document's history. </p>
<p>The revID must correspond to a leaf revision; that revision and its ancestors will be removed, except for ancestors that are shared with another branch. If the document has only one branch (no conflicts), or if the input revID is null, the purge will remove every revision, and saving the document will purge it (remove it completely from the database.) Must be called within a transaction. Remember to save the document afterwards. </p><dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Document when this function is called. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">doc</td><td>The document. </td></tr>
    <tr><td class="paramname">revID</td><td>The ID of the revision to purge. If null, all revisions are purged. </td></tr>
    <tr><td class="paramname">outError</td><td>Error information is stored here. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The total number of revisions purged (including ancestors), or -1 on error. </dd></dl>

</div>
</div>
<a id="gac111b295d53083932f5a1e00d06f47fb" name="gac111b295d53083932f5a1e00d06f47fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac111b295d53083932f5a1e00d06f47fb">&#9670;&#160;</a></span>c4doc_resolveConflict()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4doc_resolveConflict </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *</td>          <td class="paramname"><span class="paramname"><em>doc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a></td>          <td class="paramname"><span class="paramname"><em>winningRevID</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a></td>          <td class="paramname"><span class="paramname"><em>losingRevID</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#gac99d7d179bccd9bbaf29b28272975b47">C4Slice</a></td>          <td class="paramname"><span class="paramname"><em>mergedBody</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#gafc0b28ce70a5c3a9b8d968859e04b2c0">C4RevisionFlags</a></td>          <td class="paramname"><span class="paramname"><em>mergedFlags</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em>error</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resolves a conflict between two leaf revisions, by deleting one of them and optionally adding a new merged revision as a child of the other. </p>
<p>Must be called within a transaction. Remember to save the document afterwards. </p><dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Document when this function is called. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">doc</td><td>The document. </td></tr>
    <tr><td class="paramname">winningRevID</td><td>The conflicting revision to be kept (and optionally updated.) </td></tr>
    <tr><td class="paramname">losingRevID</td><td>The conflicting revision to be deleted. </td></tr>
    <tr><td class="paramname">mergedBody</td><td>The body of the merged revision, or nullslice to keep the winning rev's body. </td></tr>
    <tr><td class="paramname">mergedFlags</td><td>Flags for the merged revision. Ignored if mergedBody is nullslice. </td></tr>
    <tr><td class="paramname">error</td><td>Error information is stored here. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, false on failure. </dd></dl>

</div>
</div>
<a id="gadb38efa64e171b72ed5c05cdda23a3db" name="gadb38efa64e171b72ed5c05cdda23a3db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadb38efa64e171b72ed5c05cdda23a3db">&#9670;&#160;</a></span>c4doc_resolveConflict2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4doc_resolveConflict2 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *</td>          <td class="paramname"><span class="paramname"><em>doc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a></td>          <td class="paramname"><span class="paramname"><em>winningRevID</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a></td>          <td class="paramname"><span class="paramname"><em>losingRevID</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__types.html#ga20f7b17c87c48ffd2ff6d1cfeddd44e6">FLDict</a></td>          <td class="paramname"><span class="paramname"><em>mergedProperties</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#gafc0b28ce70a5c3a9b8d968859e04b2c0">C4RevisionFlags</a></td>          <td class="paramname"><span class="paramname"><em>mergedFlags</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em>error</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resolves a conflict between two leaf revisions. </p>
<p>Identical to <code>c4doc_resolveConflict</code> except that it takes the merged body as a Fleece Dict, instead of pre-encoded Fleece data. </p><dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Document when this function is called. </dd></dl>

</div>
</div>
<a id="ga5e27475d7360c3d136b2849d1bbf7a90" name="ga5e27475d7360c3d136b2849d1bbf7a90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5e27475d7360c3d136b2849d1bbf7a90">&#9670;&#160;</a></span>c4doc_save()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4doc_save </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *</td>          <td class="paramname"><span class="paramname"><em>doc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>maxRevTreeDepth</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em>outError</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves changes to a <a class="el" href="struct_c4_document.html" title="Describes a version-controlled document.">C4Document</a>. </p>
<p>Must be called within a transaction. The revision history will be pruned to the maximum depth given. </p><dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Database and Document when this function is called. </dd></dl>

</div>
</div>
<a id="gabe0b8150422c09be9bc11f87e1166b1a" name="gabe0b8150422c09be9bc11f87e1166b1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabe0b8150422c09be9bc11f87e1166b1a">&#9670;&#160;</a></span>c4doc_selectCommonAncestorRevision()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4doc_selectCommonAncestorRevision </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *</td>          <td class="paramname"><span class="paramname"><em>doc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a></td>          <td class="paramname"><span class="paramname"><em>rev1ID</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a></td>          <td class="paramname"><span class="paramname"><em>rev2ID</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Selects the common ancestor of two revisions. </p>
<p>Returns false if none is found. </p><dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Document when this function is called. </dd></dl>

</div>
</div>
<a id="gabfc224f2ca55fdbf70402c34129e4e38" name="gabfc224f2ca55fdbf70402c34129e4e38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabfc224f2ca55fdbf70402c34129e4e38">&#9670;&#160;</a></span>c4doc_selectCurrentRevision()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4doc_selectCurrentRevision </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *</td>          <td class="paramname"><span class="paramname"><em>doc</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Selects the current revision of a document. </p>
<p>(This is the first revision, in the order they appear in the document.) </p><dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Document when this function is called. </dd></dl>

</div>
</div>
<a id="ga04c96c72d8114a88ac36787b0107995a" name="ga04c96c72d8114a88ac36787b0107995a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga04c96c72d8114a88ac36787b0107995a">&#9670;&#160;</a></span>c4doc_selectNextLeafRevision()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4doc_selectNextLeafRevision </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *</td>          <td class="paramname"><span class="paramname"><em>doc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>includeDeleted</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>withBody</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em>outError</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Selects the next leaf revision; like selectNextRevision but skips over non-leaves. </p>
<p>To distinguish between the end of the iteration and a failure, check the value of outError after the function returns false: if there's no error (code==0) it's normal. </p><dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Documnet when this function is called. </dd></dl>

</div>
</div>
<a id="ga58caa1b30480a15f5bd821e434808dc0" name="ga58caa1b30480a15f5bd821e434808dc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga58caa1b30480a15f5bd821e434808dc0">&#9670;&#160;</a></span>c4doc_selectNextRevision()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4doc_selectNextRevision </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *</td>          <td class="paramname"><span class="paramname"><em>doc</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Selects the next revision in priority order. </p>
<p>This can be used to iterate over all revisions, starting from the current revision. </p><dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Document when this function is called. </dd></dl>

</div>
</div>
<a id="ga1405c06e813649514ca510fb1c60704e" name="ga1405c06e813649514ca510fb1c60704e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1405c06e813649514ca510fb1c60704e">&#9670;&#160;</a></span>c4doc_selectParentRevision()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4doc_selectParentRevision </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *</td>          <td class="paramname"><span class="paramname"><em>doc</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Selects the parent of the selected revision, if it's known, else returns false. </p>
<p>Throws if the document is a version-vectors document. </p><dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Document when this function is called. </dd></dl>

</div>
</div>
<a id="gafa3c09e649f3e1e62dd5f2939bd41d2c" name="gafa3c09e649f3e1e62dd5f2939bd41d2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafa3c09e649f3e1e62dd5f2939bd41d2c">&#9670;&#160;</a></span>c4doc_selectRevision()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4doc_selectRevision </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *</td>          <td class="paramname"><span class="paramname"><em>doc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a></td>          <td class="paramname"><span class="paramname"><em>revID</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>withBody</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em>outError</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Selects a specific revision of a document (or no revision, if revID is NULL.) </p>
<dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Document when this function is called. </dd></dl>

</div>
</div>
<a id="ga228ae7e8c04fcdddf6b9ce239d6bfc51" name="ga228ae7e8c04fcdddf6b9ce239d6bfc51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga228ae7e8c04fcdddf6b9ce239d6bfc51">&#9670;&#160;</a></span>c4doc_setRemoteAncestor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_compiler_support_8h.html#abf13e44576a768044e199191d4f26f7e">NODISCARD</a> <a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4doc_setRemoteAncestor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *</td>          <td class="paramname"><span class="paramname"><em>doc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#gade764c77842eee504a5fea7bbbed00e2">C4RemoteID</a></td>          <td class="paramname"><span class="paramname"><em>remoteDatabase</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a></td>          <td class="paramname"><span class="paramname"><em>revID</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em>error</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Marks a revision as current for the given remote database. </p>
<dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Database and Document when this function is called. </dd></dl>

</div>
</div>
<a id="ga2fff70484029ee1f74064c0fd96a8539" name="ga2fff70484029ee1f74064c0fd96a8539"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2fff70484029ee1f74064c0fd96a8539">&#9670;&#160;</a></span>c4doc_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="struct_c4_document.html">C4Document</a> * c4doc_update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c4_document.html">C4Document</a> *</td>          <td class="paramname"><span class="paramname"><em>doc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#gac99d7d179bccd9bbaf29b28272975b47">C4Slice</a></td>          <td class="paramname"><span class="paramname"><em>revisionBody</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#gafc0b28ce70a5c3a9b8d968859e04b2c0">C4RevisionFlags</a></td>          <td class="paramname"><span class="paramname"><em>revisionFlags</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *</td>          <td class="paramname"><span class="paramname"><em>error</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a revision to a document already in memory as a <a class="el" href="struct_c4_document.html" title="Describes a version-controlled document.">C4Document</a>. </p>
<p>This is more efficient than c4doc_put because it doesn't have to read from the database before writing; but if the <a class="el" href="struct_c4_document.html" title="Describes a version-controlled document.">C4Document</a> doesn't have the current state of the document, it will fail with the error kC4ErrorConflict &ndash; then you'll need to get the current document and try again. The new revision is added as a child of the currently selected revision. </p><dl class="section note"><dt>Note</dt><dd>The caller must use a lock for Database and Document when this function is called. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">doc</td><td>The document to update </td></tr>
    <tr><td class="paramname">revisionBody</td><td>The body of the new revision </td></tr>
    <tr><td class="paramname">revisionFlags</td><td>The flags of the new revision </td></tr>
    <tr><td class="paramname">error</td><td>Information about any error that occurred </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, a new <a class="el" href="struct_c4_document.html" title="Describes a version-controlled document.">C4Document</a> with the new revision selected; else NULL. </dd></dl>

</div>
</div>
<a id="gabee60916a457336a99afca17471139e9" name="gabee60916a457336a99afca17471139e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabee60916a457336a99afca17471139e9">&#9670;&#160;</a></span>c4rev_equal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> bool c4rev_equal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#gac99d7d179bccd9bbaf29b28272975b47">C4Slice</a></td>          <td class="paramname"><span class="paramname"><em>rev1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___base.html#gac99d7d179bccd9bbaf29b28272975b47">C4Slice</a></td>          <td class="paramname"><span class="paramname"><em>rev2</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if two revision IDs are equivalent: </p>
<ul>
<li>If both are version vectors (or single versions) and their leading versions are equal;</li>
<li>or if both are digest-based and are bitwise equal;</li>
<li>or if one is a digest and converting it to a legacy Version equals the other. </li>
</ul>

</div>
</div>
<a id="ga519b9b22df91f1946c16cc895a30acf8" name="ga519b9b22df91f1946c16cc895a30acf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga519b9b22df91f1946c16cc895a30acf8">&#9670;&#160;</a></span>c4rev_getGeneration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> unsigned c4rev_getGeneration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a></td>          <td class="paramname"><span class="paramname"><em>revID</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a tree-based revision ID, returns its generation number (the decimal number before the hyphen), or zero if it's unparseable. </p>
<dl class="section warning"><dt>Warning</dt><dd>This function does not support version-based revision IDs. Given one it returns zero, because the timestamp would be too big to return on platforms where <code>unsigned</code> is 32-bit. Use <a class="el" href="#gaed62cbbc4b37f2d7cca6fc5775485905">c4rev_getTimestamp</a> to support version-based revIDs. </dd></dl>

</div>
</div>
<a id="gaed62cbbc4b37f2d7cca6fc5775485905" name="gaed62cbbc4b37f2d7cca6fc5775485905"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaed62cbbc4b37f2d7cca6fc5775485905">&#9670;&#160;</a></span>c4rev_getTimestamp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> uint64_t c4rev_getTimestamp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a></td>          <td class="paramname"><span class="paramname"><em>revID</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a revision ID that's a Version (of the form <code>time\@peer</code>), returns its timestamp. </p>
<p>This can be interpreted as the time the revision was created, in nanoseconds since the Unix epoch, but it's not necessarily exact.</p>
<p>If this is a tree-based revision ID (of the form <code>gen-digest</code>), it returns the generation number. (This can be distinguished from a timestamp because it's much, much smaller! Timestamps will be at least 2^50, while generations rarely hit one million.) </p>

</div>
</div>
<a id="ga01457c44e69743ef3a5c6e0ee05b62ab" name="ga01457c44e69743ef3a5c6e0ee05b62ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga01457c44e69743ef3a5c6e0ee05b62ab">&#9670;&#160;</a></span>c4rev_legacyAsVersion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_compat_8h.html#a172b88317c4e1248e156ca77731f1650">CBL_CORE_API</a> <a class="el" href="group___base.html#ga7641ec7c9f4339b65cc4aabc050d67d8">C4SliceResult</a> c4rev_legacyAsVersion </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___base.html#ga04de3d84e73df3c8b75092054abcc117">C4String</a></td>          <td class="paramname"><span class="paramname"><em>revID</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a "legacy" tree-based revision ID, converts it to a synthetic version-based ID using the standard algorithm (generation and 40 bits of the digest are stuffed into the Version's timestamp, and the Version's sourceID is a well-known constant.) </p>
<p>Given a version-based revision ID, returns it unchanged. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
